# SOME DESCRIPTIVE TITLE
# Copyright (C) YEAR Free Software Foundation, Inc.
# This file is distributed under the same license as the PACKAGE package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"POT-Creation-Date: 2023-10-22 08:05+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#. type: Title =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:7
#, no-wrap
msgid "Kubernetes extension"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:18
msgid "Quarkus offers the ability to automatically generate Kubernetes resources based on sane defaults and user-supplied configuration using https://github.com/dekorateio/dekorate/[dekorate].  It currently supports generating resources for vanilla xref:kubernetes[Kubernetes], xref:openshift[OpenShift] and xref:knative[Knative].  Furthermore, Quarkus can deploy the application to a target Kubernetes cluster by applying the generated manifests to the target cluster's API Server.  Finally, when either one of container image extensions is present (see the xref:container-image.adoc[container image guide] for more details), Quarkus has the ability to create a container image and push it to a registry *before* deploying the application to the target platform."
msgstr ""

#. type: Title ==
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:19
#, no-wrap
msgid "Prerequisites"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:24
msgid "Access to a Kubernetes cluster (Minikube is a viable option)"
msgstr ""

#. type: Block title
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:26
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1055
#, no-wrap
msgid "Kubernetes"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:29
msgid "Let's create a new project that contains both the Kubernetes and Jib extensions:"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:36
msgid "This added the following dependencies to the build file:"
msgstr ""

#. type: Block title
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:38
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:633
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:885
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:989
#, no-wrap
msgid "pom.xml"
msgstr "pom.xml"

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:52
#, no-wrap
msgid ""
"<dependency>\n"
"    <groupId>io.quarkus</groupId>\n"
"    <artifactId>quarkus-resteasy-reactive</artifactId>\n"
"</dependency>\n"
"<dependency>\n"
"    <groupId>io.quarkus</groupId>\n"
"    <artifactId>quarkus-kubernetes</artifactId>\n"
"</dependency>\n"
"<dependency>\n"
"    <groupId>io.quarkus</groupId>\n"
"    <artifactId>quarkus-container-image-jib</artifactId>\n"
"</dependency>\n"
msgstr ""

#. type: Block title
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:55
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:642
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:894
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:998
#, no-wrap
msgid "build.gradle"
msgstr "build.gradle"

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:60
#, no-wrap
msgid ""
"implementation(\"io.quarkus:quarkus-resteasy-reactive\")\n"
"implementation(\"io.quarkus:quarkus-kubernetes\")\n"
"implementation(\"io.quarkus:quarkus-container-image-jib\")\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:64
msgid "By adding these dependencies, we enable the generation of Kubernetes manifests each time we perform a build while also enabling the build of a container image using Jib.  For example, following the execution of:"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:69
msgid "you will notice amongst the other files that are created, two files named `kubernetes.json` and `kubernetes.yml` in the `target/kubernetes/` directory."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:71
msgid "If you look at either file you will see that it contains both a Kubernetes `Deployment` and a `Service`."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:73
msgid "The full source of the `kubernetes.json` file looks something like this:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:152
#, no-wrap
msgid ""
"{\n"
"  {\n"
"    \"apiVersion\" : \"apps/v1\",\n"
"    \"kind\" : \"Deployment\",\n"
"    \"metadata\" : {\n"
"      \"annotations\": {\n"
"       \"app.quarkus.io/vcs-uri\" : \"<some url>\",\n"
"       \"app.quarkus.io/commit-id\" : \"<some git SHA>\",\n"
"      },\n"
"      \"labels\" : {\n"
"        \"app.kubernetes.io/name\" : \"test-quarkus-app\",\n"
"        \"app.kubernetes.io/version\" : \"1.0.0-SNAPSHOT\",\n"
"      },\n"
"      \"name\" : \"test-quarkus-app\"\n"
"    },\n"
"    \"spec\" : {\n"
"      \"replicas\" : 1,\n"
"      \"selector\" : {\n"
"        \"matchLabels\" : {\n"
"          \"app.kubernetes.io/name\" : \"test-quarkus-app\",\n"
"          \"app.kubernetes.io/version\" : \"1.0.0-SNAPSHOT\",\n"
"        }\n"
"      },\n"
"      \"template\" : {\n"
"        \"metadata\" : {\n"
"          \"labels\" : {\n"
"            \"app.kubernetes.io/name\" : \"test-quarkus-app\",\n"
"            \"app.kubernetes.io/version\" : \"1.0.0-SNAPSHOT\"\n"
"          }\n"
"        },\n"
"        \"spec\" : {\n"
"          \"containers\" : [ {\n"
"            \"env\" : [ {\n"
"              \"name\" : \"KUBERNETES_NAMESPACE\",\n"
"              \"valueFrom\" : {\n"
"                \"fieldRef\" : {\n"
"                  \"fieldPath\" : \"metadata.namespace\"\n"
"                }\n"
"              }\n"
"            } ],\n"
"            \"image\" : \"yourDockerUsername/test-quarkus-app:1.0.0-SNAPSHOT\",\n"
"            \"imagePullPolicy\" : \"Always\",\n"
"            \"name\" : \"test-quarkus-app\"\n"
"          } ]\n"
"        }\n"
"      }\n"
"    }\n"
"  },\n"
"  {\n"
"  \"apiVersion\" : \"v1\",\n"
"  \"kind\" : \"Service\",\n"
"    \"metadata\" : {\n"
"      \"annotations\": {\n"
"       \"app.quarkus.io/vcs-uri\" : \"<some url>\",\n"
"       \"app.quarkus.io/commit-id\" : \"<some git SHA>\",\n"
"      },\n"
"      \"labels\" : {\n"
"        \"app.kubernetes.io/name\" : \"test-quarkus-app\",\n"
"        \"app.kubernetes.io/version\" : \"1.0.0-SNAPSHOT\",\n"
"      },\n"
"      \"name\" : \"test-quarkus-app\"\n"
"    },\n"
"  \"spec\" : {\n"
"    \"ports\" : [ {\n"
"      \"name\" : \"http\",\n"
"      \"port\" : 8080,\n"
"      \"targetPort\" : 8080\n"
"    } ],\n"
"    \"selector\" : {\n"
"      \"app.kubernetes.io/name\" : \"test-quarkus-app\",\n"
"      \"app.kubernetes.io/version\" : \"1.0.0-SNAPSHOT\"\n"
"    },\n"
"    \"type\" : \"ClusterIP\"\n"
"  }\n"
" }\n"
"}\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:155
msgid "The generated manifest can be applied to the cluster from the project root using `kubectl`:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:159
#, no-wrap
msgid "kubectl apply -f target/kubernetes/kubernetes.json\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:163
msgid "An important thing to note about the `Deployment` (or `StatefulSet`) is that is uses `yourDockerUsername/test-quarkus-app:1.0.0-SNAPSHOT` as the container image of the `Pod`.  The name of the image is controlled by the Jib extension and can be customized using the usual `application.properties`."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:165
msgid "For example with a configuration like:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:171
#, no-wrap
msgid ""
"quarkus.container-image.group=quarkus #optional, default to the system username\n"
"quarkus.container-image.name=demo-app #optional, defaults to the application name\n"
"quarkus.container-image.tag=1.0       #optional, defaults to the application version\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:174
msgid "The image that will be used in the generated manifests will be `quarkus/demo-app:1.0`"
msgstr ""

#. type: Title ===
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:175
#, no-wrap
msgid "Generating idempotent resources"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:178
msgid "When generating the Kubernetes manifests, Quarkus automatically adds some labels and annotations to give extra information about the generation date or versions. For example:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:194
#, no-wrap
msgid ""
"apiVersion: apps/v1\n"
"kind: Deployment\n"
"metadata:\n"
"  annotations:\n"
"    app.quarkus.io/commit-id: 0f8b87788bc446a9347a7961bea8a60889fe1494\n"
"    app.quarkus.io/build-timestamp: 2023-02-10 - 13:07:51 +0000\n"
"  labels:\n"
"    app.kubernetes.io/managed-by: quarkus\n"
"    app.kubernetes.io/version: 0.0.1-SNAPSHOT\n"
"    app.kubernetes.io/name: example\n"
"  name: example\n"
"spec:\n"
"  ...\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:197
msgid "The `app.quarkus.io/commit-id`, `app.quarkus.io/build-timestamp` labels and the `app.kubernetes.io/version` annotation might change every time we re-build the Kubernetes manifests which can be problematic when we want to deploy these resources using a Git-Ops tool (because these tools will detect differences and hence will perform a re-deployment)."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:199
msgid "To make the generated resources Git-Ops friendly and only produce idempotent resources (resources that won't change every time we build the sources), we need to add the following property:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:203
#, no-wrap
msgid "quarkus.kubernetes.idempotent=true\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:206
msgid "Moreover, by default the directory where the generated resources are created is `target/kubernetes`, to change it, we need to use:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:210
#, no-wrap
msgid "quarkus.kubernetes.output-directory=target/kubernetes-with-idempotent\n"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:215
msgid "Note that the property `quarkus.kubernetes.output-directory` is relative to the current project location."
msgstr ""

#. type: Title ===
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:217
#, no-wrap
msgid "Changing the generated deployment resource"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:220
msgid "Besides generating a `Deployment` resource, you can also choose to generate either a `StatefulSet`, or a `Job`, or a `CronJob` resource instead via `application.properties`:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:224
#, no-wrap
msgid "quarkus.kubernetes.deployment-kind=StatefulSet\n"
msgstr ""

#. type: Title ====
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:226
#, no-wrap
msgid "Generating Job resources"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:229
msgid "If you want to generate a Job resource, you need to add the following property to the `application.properties`:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:233
#, no-wrap
msgid "quarkus.kubernetes.deployment-kind=Job\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:236
msgid "If you are using the Picocli extension, by default a Job resource will be generated."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:238
msgid "You can provide the arguments that will be used by the Kubernetes Job via the property `quarkus.kubernetes.arguments`. For example, by adding the property `quarkus.kubernetes.arguments=A,B`."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:240
msgid "Finally, the Kubernetes job will be launched every time it is installed in Kubernetes. You can know more about how to run Kubernetes jobs in this https://kubernetes.io/docs/concepts/workloads/controllers/job/#running-an-example-job[link]."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:242
msgid "You can configure the rest of the Kubernetes Job configuration using the properties under `quarkus.kubernetes.job.xxx` (see xref:deploying-to-kubernetes.adoc#quarkus-kubernetes-kubernetes-config_quarkus.kubernetes.job.parallelism[link])."
msgstr ""

#. type: Title ====
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:243
#, no-wrap
msgid "Generating CronJob resources"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:246
msgid "If you want to generate a CronJob resource, you need to add the following property via the `application.properties`:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:252
#, no-wrap
msgid ""
"quarkus.kubernetes.deployment-kind=CronJob\n"
"# Cron expression to run the job every hour\n"
"quarkus.kubernetes.cron-job.schedule=0 * * * *\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:255
msgid "CronJob resources require the https://en.wikipedia.org/wiki/Cron[Cron] expression to specify when to launch the job via the property `quarkus.kubernetes.cron-job.schedule`. If not provide, the build will fail."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:257
msgid "You can configure the rest of the Kubernetes CronJob configuration using the properties under `quarkus.kubernetes.cron-job.xxx` (see xref:deploying-to-kubernetes.adoc#quarkus-kubernetes-kubernetes-config_quarkus.kubernetes.cron-job.parallelism[link])."
msgstr ""

#. type: Title ===
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:258
#, no-wrap
msgid "Namespace"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:261
msgid "By default, Quarkus omits the namespace in the generated manifests, rather than enforce the `default` namespace. That means that you can apply the manifest to your chosen namespace when using `kubectl`, which in the example below is `test`:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:265
#, no-wrap
msgid "kubectl apply -f target/kubernetes/kubernetes.json -n=test\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:268
msgid "To specify the namespace in your manifest customize with the following property in your `application.properties`:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:272
#, no-wrap
msgid "quarkus.kubernetes.namespace=mynamespace\n"
msgstr ""

#. type: Title ===
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:274
#, no-wrap
msgid "Defining a Docker registry"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:277
msgid "The Docker registry can be specified with the following property:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:281
#, no-wrap
msgid "quarkus.container-image.registry=my.docker-registry.net\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:285
msgid "By adding this property along with the rest of the container image properties of the previous section, the generated manifests will use the image `my.docker-registry.net/quarkus/demo-app:1.0`.  The image is not the only thing that can be customized in the generated manifests, as will become evident in the following sections."
msgstr ""

#. type: Title ====
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:287
#, no-wrap
msgid "Automatic generation of pull secrets"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:290
msgid "When docker registries are used, users often provide credentials, so that an image is built and pushed to the specified registry during the build."
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:294
#, no-wrap
msgid ""
"quarkus.container-image.username=myusername\n"
"quarkus.container-image.password=mypassword\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:298
msgid "Kubernetes will also need these credentials when it comes to pull the image from the registry. This is where image pull secrets are used. An image pull secret is a special kind of secret that contains the required credentials. Quarkus can automatically generate and configure when:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:302
#, no-wrap
msgid "quarkus.kubernetes.generate-image-pull-secret=true\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:305
msgid "More specifically a `Secret`like the one bellow is genrated:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:315
#, no-wrap
msgid ""
"apiVersion: v1\n"
"kind: Secret\n"
"metadata:\n"
"  name: test-quarkus-app-pull-secret\n"
"data:\n"
"  \".dockerconfigjson\": ewogCSJhdXRocyI6IHsKCQkibXkucmVnaXN0eS5vcmciOiB7CiAJCQkiYXV0aCI6ImJYbDFjMlZ5Ym1GdFpUcHRlWEJoYzNOM2IzSmsiCgkJfQoJfQp9\n"
"type: kubernetes.io/dockerconfigjson\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:319
msgid "And also `test-quarkus-app-pull-secret` is added to the `imagePullSecrets` list."
msgstr ""

#. type: Title ===
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:321
#, no-wrap
msgid "Labels and Annotations"
msgstr ""

#. type: Title ====
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:323
#, no-wrap
msgid "Labels"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:328
msgid "The generated manifests use the Kubernetes link:https://kubernetes.io/docs/concepts/overview/working-with-objects/common-labels[recommended labels].  These labels can be customized using `quarkus.kubernetes.name`, `quarkus.kubernetes.version` and `quarkus.kubernetes.part-of`.  For example by adding the following configuration to your `application.properties`:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:334
#, no-wrap
msgid ""
"quarkus.kubernetes.part-of=todo-app\n"
"quarkus.kubernetes.name=todo-rest\n"
"quarkus.kubernetes.version=1.0-rc.1\n"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:340
msgid "As is described in detail in the xref:openshift[OpenShift] section, customizing OpenShift (or Knative) properties is done in the same way, but replacing `kubernetes` with `openshift` (or `knative`). The previous example for OpenShift would look like this:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:346
#, no-wrap
msgid ""
"quarkus.openshift.part-of=todo-app\n"
"quarkus.openshift.name=todo-rest\n"
"quarkus.openshift.version=1.0-rc.1\n"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:350
msgid "The labels in generated resources will look like:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:358
#, no-wrap
msgid ""
"  \"labels\" : {\n"
"    \"app.kubernetes.io/part-of\" : \"todo-app\",\n"
"    \"app.kubernetes.io/name\" : \"todo-rest\",\n"
"    \"app.kubernetes.io/version\" : \"1.0-rc.1\"\n"
"  }\n"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:363
msgid "You can also remove the `app.kubernetes.io/version` label by applying the following configuration:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:367
#, no-wrap
msgid "quarkus.kubernetes.add-version-to-label-selectors=false\n"
msgstr ""

#. type: Title ====
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:370
#, no-wrap
msgid "Custom Labels"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:373
msgid "To add additional custom labels, for example `foo=bar` just apply the following configuration:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:377
#, no-wrap
msgid "quarkus.kubernetes.labels.foo=bar\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:380
msgid "When using the `quarkus-container-image-jib` extension to build a container image, then any label added via the aforementioned property will also be added to the generated container image."
msgstr ""

#. type: Title ====
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:381
#, no-wrap
msgid "Annotations"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:384
msgid "Out of the box, the generated resources will be annotated with version control related information that can be used either by tooling, or by the user for troubleshooting purposes."
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:391
#, no-wrap
msgid ""
"  \"annotations\": {\n"
"    \"app.quarkus.io/vcs-uri\" : \"<some url>\",\n"
"    \"app.quarkus.io/commit-id\" : \"<some git SHA>\",\n"
"   }\n"
msgstr ""

#. type: Title ====
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:393
#, no-wrap
msgid "Custom Annotations"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:396
msgid "Custom annotations can be added in a way similar to labels.For example to add the annotation `foo=bar` and `app.quarkus/id=42` just apply the following configuration:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:401
#, no-wrap
msgid ""
"quarkus.kubernetes.annotations.foo=bar\n"
"quarkus.kubernetes.annotations.\"app.quarkus/id\"=42\n"
msgstr ""

#. type: Title ====
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:404
#, no-wrap
msgid "Environment variables"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:407
msgid "Kubernetes provides multiple ways of defining environment variables:"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:409
msgid "key/value pairs"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:410
msgid "import all values from a Secret or ConfigMap"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:411
msgid "interpolate a single value identified by a given field in a Secret or ConfigMap"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:412
msgid "interpolate a value from a field within the same resource"
msgstr ""

#. type: Title =====
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:413
#, no-wrap
msgid "Environment variables from key/value pairs"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:416
msgid "To add a key/value pair as an environment variable in the generated resources:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:420
#, no-wrap
msgid "quarkus.kubernetes.env.vars.my-env-var=foobar\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:424
msgid "The command above will add `MY_ENV_VAR=foobar` as an environment variable.  Please note that the key `my-env-var` will be converted to uppercase and dashes will be replaced by underscores resulting in `MY_ENV_VAR`."
msgstr ""

#. type: Title =====
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:426
#, no-wrap
msgid "Environment variables from Secret"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:430
msgid "To add all key/value pairs of `Secret` as environment variables just apply the following configuration, separating each `Secret` to be used as source by a comma (`,`):"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:434
#, no-wrap
msgid "quarkus.kubernetes.env.secrets=my-secret,my-other-secret\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:437
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:481
msgid "which would generate the following in the container definition:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:447
#, no-wrap
msgid ""
"envFrom:\n"
"  - secretRef:\n"
"      name: my-secret\n"
"      optional: false\n"
"  - secretRef:\n"
"      name: my-other-secret\n"
"      optional: false\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:450
msgid "The following extracts a value identified by the `keyName` field from the `my-secret` Secret into a `foo` environment variable:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:455
#, no-wrap
msgid ""
"quarkus.kubernetes.env.mapping.foo.from-secret=my-secret\n"
"quarkus.kubernetes.env.mapping.foo.with-key=keyName\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:458
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:503
msgid "This would generate the following in the `env` section of your container:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:468
#, no-wrap
msgid ""
"- env:\n"
"  - name: FOO\n"
"    valueFrom:\n"
"      secretKeyRef:\n"
"        key: keyName\n"
"        name: my-secret\n"
"        optional: false\n"
msgstr ""

#. type: Title =====
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:470
#, no-wrap
msgid "Environment variables from ConfigMap"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:474
msgid "To add all key/value pairs from `ConfigMap` as environment variables just apply the following configuration, separating each `ConfigMap` to be used as source by a comma (`,`):"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:478
#, no-wrap
msgid "quarkus.kubernetes.env.configmaps=my-config-map,another-config-map\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:491
#, no-wrap
msgid ""
"envFrom:\n"
"  - configMapRef:\n"
"      name: my-config-map\n"
"      optional: false\n"
"  - configMapRef:\n"
"      name: another-config-map\n"
"      optional: false\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:495
msgid "The following extracts a value identified by the `keyName` field from the `my-config-map` ConfigMap into a `foo` environment variable:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:500
#, no-wrap
msgid ""
"quarkus.kubernetes.env.mapping.foo.from-configmap=my-configmap\n"
"quarkus.kubernetes.env.mapping.foo.with-key=keyName\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:513
#, no-wrap
msgid ""
"- env:\n"
"  - name: FOO\n"
"    valueFrom:\n"
"      configMapRefKey:\n"
"        key: keyName\n"
"        name: my-configmap\n"
"        optional: false\n"
msgstr ""

#. type: Title =====
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:515
#, no-wrap
msgid "Environment variables from fields"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:518
msgid "It's also possible to use the value from another field to add a new environment variable by specifying the path of the field to be used as a source, as follows:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:522
#, no-wrap
msgid "quarkus.kubernetes.env.fields.foo=metadata.name\n"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:528
msgid "As is described in detail in the xref:openshift[OpenShift] section, customizing OpenShift properties is done in the same way, but replacing `kubernetes` with `openshift`. The previous example for OpenShift would look like this:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:532
#, no-wrap
msgid "quarkus.openshift.env.fields.foo=metadata.name\n"
msgstr ""

#. type: Title =====
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:535
#, no-wrap
msgid "Validation"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:538
msgid "A conflict between two definitions, e.g. mistakenly assigning both a value and specifying that a variable is derived from a field, will result in an error being thrown at build time so that you get the opportunity to fix the issue before you deploy your application to your cluster where it might be more difficult to diagnose the source of the issue."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:540
msgid "Similarly, two redundant definitions, e.g. defining an injection from the same secret twice, will not cause an issue but will indeed report a warning to let you know that you might not have intended to duplicate that definition."
msgstr ""

#. type: Title =====
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:542
#, no-wrap
msgid "Backwards compatibility"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:545
msgid "Previous versions of the Kubernetes extension supported a different syntax to add environment variables. The older syntax is still supported but is deprecated, and it's advised that you migrate to the new syntax."
msgstr ""

#. type: Block title
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:546
#, no-wrap
msgid "Old vs. new syntax"
msgstr ""

#. type: Table
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:548
#, no-wrap
msgid "Old"
msgstr ""

#. type: Table
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:548
#, no-wrap
msgid "New"
msgstr ""

#. type: Table
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:549
#, no-wrap
msgid "Plain variable"
msgstr ""

#. type: Table
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:549
#, no-wrap
msgid "`quarkus.kubernetes.env-vars.my-env-var.value=foobar`"
msgstr ""

#. type: Table
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:549
#, no-wrap
msgid "`quarkus.kubernetes.env.vars.my-env-var=foobar`"
msgstr ""

#. type: Table
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:550
#, no-wrap
msgid "From field"
msgstr ""

#. type: Table
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:550
#, no-wrap
msgid "`quarkus.kubernetes.env-vars.my-env-var.field=foobar`"
msgstr ""

#. type: Table
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:550
#, no-wrap
msgid "`quarkus.kubernetes.env.fields.my-env-var=foobar`"
msgstr ""

#. type: Table
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:551
#, no-wrap
msgid "All from `ConfigMap`"
msgstr ""

#. type: Table
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:551
#, no-wrap
msgid "`quarkus.kubernetes.env-vars.xxx.configmap=foobar`"
msgstr ""

#. type: Table
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:551
#, no-wrap
msgid "`quarkus.kubernetes.env.configmaps=foobar`"
msgstr ""

#. type: Table
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:552
#, no-wrap
msgid "All from `Secret`"
msgstr ""

#. type: Table
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:552
#, no-wrap
msgid "`quarkus.kubernetes.env-vars.xxx.secret=foobar`"
msgstr ""

#. type: Table
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:552
#, no-wrap
msgid "`quarkus.kubernetes.env.secrets=foobar`"
msgstr ""

#. type: Table
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:553
#, no-wrap
msgid "From one `Secret` field"
msgstr ""

#. type: Table
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:553
#, no-wrap
msgid "`quarkus.kubernetes.env-vars.foo.secret=foobar`"
msgstr ""

#. type: Table
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:553
#, no-wrap
msgid "`quarkus.kubernetes.env.mapping.foo.from-secret=foobar`"
msgstr ""

#. type: Table
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:554
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:556
#, no-wrap
msgid "`quarkus.kubernetes.env-vars.foo.value=field`"
msgstr ""

#. type: Table
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:554
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:556
#, no-wrap
msgid "`quarkus.kubernetes.env.mapping.foo.with-key=field`"
msgstr ""

#. type: Table
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:555
#, no-wrap
msgid "From one `ConfigMap` field"
msgstr ""

#. type: Table
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:555
#, no-wrap
msgid "`quarkus.kubernetes.env-vars.foo.configmap=foobar`"
msgstr ""

#. type: Table
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:555
#, no-wrap
msgid "`quarkus.kubernetes.env.mapping.foo.from-configmap=foobar`"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:563
msgid "If you redefine the same variable using the new syntax while keeping the old syntax, **ONLY** the new version will be kept and a warning will be issued to alert you of the problem.For example, if you define both `quarkus.kubernetes.env-vars.my-env-var.value=foobar` and `quarkus.kubernetes.env.vars.my-env-var=newValue`, the extension will only generate an environment variable `MY_ENV_VAR=newValue` and issue a warning."
msgstr ""

#. type: Title ====
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:564
#, no-wrap
msgid "Mounting volumes"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:568
msgid "The Kubernetes extension allows the user to configure both volumes and mounts for the application.  Any volume can be mounted with a simple configuration:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:572
#, no-wrap
msgid "quarkus.kubernetes.mounts.my-volume.path=/where/to/mount\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:576
msgid "This will add a mount to the pod for volume `my-volume` to path `/where/to/mount`.  The volumes themselves can be configured as shown in the sections below."
msgstr ""

#. type: Title =====
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:577
#, no-wrap
msgid "Secret volumes"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:582
#, no-wrap
msgid "quarkus.kubernetes.secret-volumes.my-volume.secret-name=my-secret\n"
msgstr ""

#. type: Title =====
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:584
#, no-wrap
msgid "ConfigMap volumes"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:589
#, no-wrap
msgid "quarkus.kubernetes.config-map-volumes.my-volume.config-map-name=my-config-map\n"
msgstr ""

#. type: Title ====
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:591
#, no-wrap
msgid "Passing application configuration"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:595
msgid "Quarkus supports passing configuration from external locations (via Smallrye Config). This usually requires setting an additional environment variable or system property.  When you need to use a secret or a config map for the purpose of application configuration, you need to:"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:597
msgid "define a volume"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:598
msgid "mount the volume"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:599
msgid "create an environment variable for `SMALLRYE_CONFIG_LOCATIONS`"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:601
msgid "To simplify things, quarkus provides single step alternative:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:605
#, no-wrap
msgid "quarkus.kubernetes.app-secret=<name of the secret containing the configuration>\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:608
msgid "or"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:612
#, no-wrap
msgid "quarkus.kubernetes.app-config-map=<name of the config map containing the configuration>\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:616
msgid "When these properties are used, the generated manifests will contain everything required.  The application config volumes will be created using path: `/mnt/app-secret` and `/mnt/app-config-map` for secrets and configmaps respectively."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:618
msgid "Note: Users may use both properties at the same time."
msgstr ""

#. type: Title ===
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:619
#, no-wrap
msgid "Changing the number of replicas:"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:622
msgid "To change the number of replicas from 1 to 3:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:626
#, no-wrap
msgid "quarkus.kubernetes.replicas=3\n"
msgstr ""

#. type: Title ===
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:628
#, no-wrap
msgid "Add readiness and liveness probes"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:631
msgid "By default, the Kubernetes resources do not contain readiness and liveness probes in the generated `Deployment`. Adding them however is just a matter of adding the SmallRye Health extension like so:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:639
#, no-wrap
msgid ""
"<dependency>\n"
"    <groupId>io.quarkus</groupId>\n"
"    <artifactId>quarkus-smallrye-health</artifactId>\n"
"</dependency>\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:645
#, no-wrap
msgid "implementation(\"io.quarkus:quarkus-smallrye-health\")\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:649
msgid "The values of the generated probes will be determined by the configured health properties: `quarkus.smallrye-health.root-path`, `quarkus.smallrye-health.liveness-path` and `quarkus.smallrye-health.readiness-path`.  More information about the health extension can be found in the relevant xref:microprofile-health.adoc[guide]."
msgstr ""

#. type: Title ===
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:650
#, no-wrap
msgid "Customizing the readiness probe"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:652
msgid "To set the initial delay of the probe to 20 seconds and the period to 45:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:657
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1066
#, no-wrap
msgid ""
"quarkus.kubernetes.readiness-probe.initial-delay=20s\n"
"quarkus.kubernetes.readiness-probe.period=45s\n"
msgstr ""

#. type: Title ===
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:659
#, no-wrap
msgid "Add hostAliases"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:661
msgid "To add entries to a Pod's `/etc/hosts` file (more information can be found in https://kubernetes.io/docs/concepts/services-networking/add-entries-to-pod-etc-hosts-with-host-aliases/[Kubernetes documentation]), just apply the following configuration:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:665
#, no-wrap
msgid "quarkus.kubernetes.hostaliases.\"10.0.0.0\".hostnames=foo.com,bar.org\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:668
msgid "This would generate the following `hostAliases` section in the `deployment` definition:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:680
#, no-wrap
msgid ""
"kind: Deployment\n"
"spec:\n"
"  template:\n"
"    spec:\n"
"      hostAliases:\n"
"      - hostnames:\n"
"        - foo.com\n"
"        - bar.org\n"
"        ip: 10.0.0.0\n"
msgstr ""

#. type: Title ===
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:682
#, no-wrap
msgid "Container Resources Management"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:685
msgid "CPU & Memory limits and requests can be applied to a `Container` (more info in https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/[Kubernetes documentation]) using the following configuration:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:692
#, no-wrap
msgid ""
"quarkus.kubernetes.resources.requests.memory=64Mi\n"
"quarkus.kubernetes.resources.requests.cpu=250m\n"
"quarkus.kubernetes.resources.limits.memory=512Mi\n"
"quarkus.kubernetes.resources.limits.cpu=1000m\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:695
msgid "This would generate the following entry in the `container` section:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:706
#, no-wrap
msgid ""
"containers:\n"
"  - resources:\n"
"    limits:\n"
"      cpu: 1000m\n"
"      memory: 512Mi\n"
"    requests:\n"
"      cpu: 250m\n"
"      memory: 64Mi\n"
msgstr ""

#. type: Title ===
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:708
#, no-wrap
msgid "Exposing your application in Kubernetes"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:711
msgid "Kubernetes exposes applications using https://kubernetes.io/docs/concepts/services-networking/ingress[Ingress resources]. To generate the Ingress resource, just apply the following configuration:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:715
#, no-wrap
msgid "quarkus.kubernetes.ingress.expose=true\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:718
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:760
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:802
msgid "This would generate the following Ingress resource:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:742
#, no-wrap
msgid ""
"apiVersion: networking.k8s.io/v1\n"
"kind: Ingress\n"
"metadata:\n"
"  annotations:\n"
"    app.quarkus.io/commit-id: a58d2211c86f07a47d4b073ea9ce000d2c6828d5\n"
"    app.quarkus.io/build-timestamp: 2022-06-29 - 13:22:41 +0000\n"
"  labels:\n"
"    app.kubernetes.io/name: kubernetes-with-ingress\n"
"    app.kubernetes.io/version: 0.1-SNAPSHOT\n"
"  name: kubernetes-with-ingress\n"
"spec:\n"
"  rules:\n"
"    - http:\n"
"        paths:\n"
"          - backend:\n"
"              service:\n"
"                name: kubernetes-with-ingress\n"
"                port:\n"
"                  name: http\n"
"            path: /\n"
"            pathType: Prefix\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:745
msgid "After deploying these resources to Kubernetes, the Ingress resource will allow unsecured connections to reach out your application."
msgstr ""

#. type: Title ====
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:746
#, no-wrap
msgid "Adding Ingress rules"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:749
msgid "To customize the default `host` and `path` properties of the generated Ingress resources, you need to apply the following configuration:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:757
#, no-wrap
msgid ""
"quarkus.kubernetes.ingress.expose=true\n"
"# To change the Ingress host. By default, it's empty.\n"
"quarkus.kubernetes.ingress.host=prod.svc.url\n"
"# To change the Ingress path of the generated Ingress rule. By default, it's \"/\".\n"
"quarkus.kubernetes.ports.http.path=/prod\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:782
#, no-wrap
msgid ""
"apiVersion: networking.k8s.io/v1\n"
"kind: Ingress\n"
"metadata:\n"
"  labels:\n"
"    app.kubernetes.io/name: kubernetes-with-ingress\n"
"    app.kubernetes.io/version: 0.1-SNAPSHOT\n"
"  name: kubernetes-with-ingress\n"
"spec:\n"
"  rules:\n"
"    - host: prod.svc.url\n"
"      http:\n"
"        paths:\n"
"          - backend:\n"
"              service:\n"
"                name: kubernetes-with-ingress\n"
"                port:\n"
"                  name: http\n"
"            path: /prod\n"
"            pathType: Prefix\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:785
msgid "Additionally, you can also add new Ingress rules by adding the following configuration:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:793
#, no-wrap
msgid ""
"# Example to add a new rule\n"
"quarkus.kubernetes.ingress.rules.1.host=dev.svc.url\n"
"quarkus.kubernetes.ingress.rules.1.path=/dev\n"
"quarkus.kubernetes.ingress.rules.1.path-type=ImplementationSpecific\n"
"# by default, path type is Prefix\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:799
#, no-wrap
msgid ""
"# Example to add a new rule that use another service binding\n"
"quarkus.kubernetes.ingress.rules.2.host=alt.svc.url\n"
"quarkus.kubernetes.ingress.rules.2.path=/ea\n"
"quarkus.kubernetes.ingress.rules.2.service-name=updated-service\n"
"quarkus.kubernetes.ingress.rules.2.service-port-name=tcpurl\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:844
#, no-wrap
msgid ""
"apiVersion: networking.k8s.io/v1\n"
"kind: Ingress\n"
"metadata:\n"
"  labels:\n"
"    app.kubernetes.io/name: kubernetes-with-ingress\n"
"    app.kubernetes.io/version: 0.1-SNAPSHOT\n"
"  name: kubernetes-with-ingress\n"
"spec:\n"
"  rules:\n"
"    - host: prod.svc.url\n"
"      http:\n"
"        paths:\n"
"          - backend:\n"
"              service:\n"
"                name: kubernetes-with-ingress\n"
"                port:\n"
"                  name: http\n"
"            path: /prod\n"
"            pathType: Prefix\n"
"    - host: dev.svc.url\n"
"      http:\n"
"        paths:\n"
"          - backend:\n"
"              service:\n"
"                name: kubernetes-with-ingress\n"
"                port:\n"
"                  name: http\n"
"            path: /dev\n"
"            pathType: ImplementationSpecific\n"
"    - host: alt.svc.url\n"
"      http:\n"
"        paths:\n"
"          - backend:\n"
"              service:\n"
"                name: updated-service\n"
"                port:\n"
"                  name: tcpurl\n"
"            path: /ea\n"
"            pathType: Prefix\n"
msgstr ""

#. type: Title ====
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:846
#, no-wrap
msgid "Securing the Ingress resource"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:849
msgid "To secure the incoming connections, Kubernetes allows enabling https://kubernetes.io/docs/concepts/services-networking/ingress/#tls[TLS] within the Ingress resource by specifying a Secret that contains a TLS private key and certificate. You can generate a secured Ingress resource by simply adding the \"tls.secret-name\" properties:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:855
#, no-wrap
msgid ""
"quarkus.kubernetes.ingress.expose=true\n"
"## Ingress TLS configuration:\n"
"quarkus.kubernetes.ingress.tls.my-secret.enabled=true\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:858
msgid "This configuration will generate the following secured Ingress resource:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:871
#, no-wrap
msgid ""
"apiVersion: networking.k8s.io/v1\n"
"kind: Ingress\n"
"metadata:\n"
"  ...\n"
"  name: kubernetes-with-secure-ingress\n"
"spec:\n"
"  rules:\n"
"    ...\n"
"  tls:\n"
"    - secretName: my-secret\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:874
msgid "Now, Kubernetes will validate all the incoming connections using SSL with the certificates provided within the secret with name \"my-secret\"."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:878
msgid "More information about how to create the secret in https://kubernetes.io/docs/concepts/services-networking/ingress/#tls[here]."
msgstr ""

#. type: Title ===
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:880
#, no-wrap
msgid "Using the Kubernetes client"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:883
msgid "Applications that are deployed to Kubernetes and need to access the API server will usually make use of the `kubernetes-client` extension:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:891
#, no-wrap
msgid ""
"<dependency>\n"
"    <groupId>io.quarkus</groupId>\n"
"    <artifactId>quarkus-kubernetes-client</artifactId>\n"
"</dependency>\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:897
#, no-wrap
msgid "implementation(\"io.quarkus:quarkus-kubernetes-client\")\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:901
msgid "To access the API server from within a Kubernetes cluster, some RBAC related resources are required (e.g. a ServiceAccount, a RoleBinding).  To ease the usage of the `kubernetes-client` extension, the `kubernetes` extension is going to generate a RoleBinding resource that binds a cluster role named \"view\" to the application ServiceAccount resource. It's important to note that the cluster role \"view\" won't be generated automatically, so it's expected that you have this cluster role with name \"view\" already installed in your cluster."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:903
msgid "On the other hand, you can fully customize the roles, subjects and role bindings to generate using the properties under `quarkus.kubernetes.rbac.role-bindings`, and if present, the `kubernetes-client` extension will use it and hence won't generate any RoleBinding resource."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:907
msgid "You can disable the RBAC resources generation using the property `quarkus.kubernetes-client.generate-rbac=false`."
msgstr ""

#. type: Title ===
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:909
#, no-wrap
msgid "Generating RBAC resources"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:912
msgid "In some scenarios, it's necessary to generate additional https://kubernetes.io/docs/reference/access-authn-authz/rbac/[RBAC] resources that are used by Kubernetes to grant or limit access to other resources. For example, in our use case, we are building https://kubernetes.io/docs/concepts/extend-kubernetes/operator/#operators-in-kubernetes[a Kubernetes operator] that needs to read the list of the installed deployments. To do this, we would need to assign a service account to our operator and link this service account with a role that grants access to the Deployment resources. Let's see how to do this using the `quarkus.kubernetes.rbac` properties:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:919
#, no-wrap
msgid ""
"# Generate the Role resource with name \"my-role\" <1>\n"
"quarkus.kubernetes.rbac.roles.my-role.policy-rules.0.api-groups=extensions,apps\n"
"quarkus.kubernetes.rbac.roles.my-role.policy-rules.0.resources=deployments\n"
"quarkus.kubernetes.rbac.roles.my-role.policy-rules.0.verbs=list\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:922
msgid "In this example, the role \"my-role\" will be generated with a policy rule to get the list of deployments."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:924
msgid "By default, if one role is configured, a RoleBinding resource will be generated as well to link this role with the ServiceAccount resource."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:926
msgid "Moreover, you can have more control over the RBAC resources to be generated:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:933
#, no-wrap
msgid ""
"# Generate Role resource with name \"my-role\" <1>\n"
"quarkus.kubernetes.rbac.roles.my-role.policy-rules.0.api-groups=extensions,apps\n"
"quarkus.kubernetes.rbac.roles.my-role.policy-rules.0.resources=deployments\n"
"quarkus.kubernetes.rbac.roles.my-role.policy-rules.0.verbs=get,watch,list\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:936
#, no-wrap
msgid ""
"# Generate ServiceAccount resource with name \"my-service-account\" in namespace \"my_namespace\" <2>\n"
"quarkus.kubernetes.rbac.service-accounts.my-service-account.namespace=my_namespace\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:941
#, no-wrap
msgid ""
"# Bind Role \"my-role\" with ServiceAccount \"my-service-account\" <3>\n"
"quarkus.kubernetes.rbac.role-bindings.my-role-binding.subjects.my-service-account.kind=ServiceAccount\n"
"quarkus.kubernetes.rbac.role-bindings.my-role-binding.subjects.my-service-account.namespace=my_namespace\n"
"quarkus.kubernetes.rbac.role-bindings.my-role-binding.role-name=my-role\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:944
msgid "In this example, the role \"my-role\" will be generated with the specified policy rules."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:945
msgid "Also, the service account \"my-service-account\" will be generated."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:946
msgid "And we can configure the generated RoleBinding resource by selecting the role to be used and the subject."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:948
msgid "Finally, we can also generate the cluster wide role resource of \"ClusterRole\" kind and a \"ClusterRoleBinding\" resource as follows:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:955
#, no-wrap
msgid ""
"# Generate ClusterRole resource with name \"my-cluster-role\" <1>\n"
"quarkus.kubernetes.rbac.cluster-roles.my-cluster-role.policy-rules.0.api-groups=extensions,apps\n"
"quarkus.kubernetes.rbac.cluster-roles.my-cluster-role.policy-rules.0.resources=deployments\n"
"quarkus.kubernetes.rbac.cluster-roles.my-cluster-role.policy-rules.0.verbs=get,watch,list\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:960
#, no-wrap
msgid ""
"# Bind the ClusterRole \"my-cluster-role\" with the application service account\n"
"quarkus.kubernetes.rbac.cluster-role-bindings.my-cluster-role-binding.subjects.manager.kind=Group\n"
"quarkus.kubernetes.rbac.cluster-role-bindings.my-cluster-role-binding.subjects.manager.api-group=rbac.authorization.k8s.io\n"
"quarkus.kubernetes.rbac.cluster-role-bindings.my-cluster-role-binding.role-name=my-cluster-role <2>\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:963
msgid "In this example, the cluster role \"my-cluster-role\" will be generated with the specified policy rules."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:964
msgid "The name of the ClusterRole resource to use. Role resources are namespace-based and hence not allowed in ClusterRoleBinding resources."
msgstr ""

#. type: Title ===
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:965
#, no-wrap
msgid "Deploying to local Kubernetes"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:969
msgid "When deploying to local Kubernetes environments, users often perform minor changes to their manifests that simplify the development process.  The most common changes are:"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:971
msgid "Setting `imagePullPolicy` to `IfNotPresent`"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:972
msgid "Using `NodePort` as `Service` type"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:975
msgid "Quarkus provides extensions that among others set these options by default.  Such extensions are:"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:977
msgid "quarkus-minikube"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:978
msgid "quarkus-kind"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:981
msgid "If the list of extensions does not match the tool you are using (e.g. Docker Desktop, microk8s etc) then it is suggested to use the `quarkus-minikube` extension.  as its defaults should be reasonable for most environments."
msgstr ""

#. type: Title ====
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:983
#, no-wrap
msgid "Deploying to Minikube"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:987
msgid "https://github.com/kubernetes/minikube[Minikube] is quite popular when a Kubernetes cluster is needed for development purposes. To make the deployment to Minikube experience as frictionless as possible, Quarkus provides the `quarkus-minikube` extension. This extension can be added to a project like so:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:995
#, no-wrap
msgid ""
"<dependency>\n"
"    <groupId>io.quarkus</groupId>\n"
"    <artifactId>quarkus-minikube</artifactId>\n"
"</dependency>\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1001
#, no-wrap
msgid "implementation(\"io.quarkus:quarkus-minikube\")\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1005
msgid "The purpose of this extension is to generate Kubernetes manifests (`minikube.yaml` and `minikube.json`) that are tailored to Minikube.  This extension assumes a couple of things:"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1008
msgid "Users won't be using an image registry and will instead make their container image accessible to the Kubernetes cluster by building it directly into Minikube's Docker daemon. To use Minikube's Docker daemon you must first execute:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1012
#, no-wrap
msgid "eval $(minikube -p minikube docker-env)\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1016
msgid "Applications deployed to Kubernetes won't be accessed via a Kubernetes `Ingress`, but rather as a `NodePort` `Service`.  The advantage of doing this is that the URL of an application can be retrieved trivially by executing:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1020
#, no-wrap
msgid "minikube service list\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1024
msgid "To control the https://kubernetes.io/docs/concepts/services-networking/service/#nodeport[nodePort] that is used in this case, users can set `quarkus.kubernetes.node-port`.  Note however that this configuration is entirely optional because Quarkus will automatically use a proper (and non-changing) value if none is set."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1027
msgid "It is highly discouraged to use the manifests generated by the Minikube extension when deploying to production as these manifests are intended for development purposes only. When deploying to production, consider using the vanilla Kubernetes manifests (or the OpenShift ones when targeting OpenShift)."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1030
msgid "If the assumptions the Minikube extension makes don't fit your workflow, nothing prevents you from using the regular Kubernetes extension to generate Kubernetes manifests and apply those to your Minikube cluster."
msgstr ""

#. type: Title ====
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1031
#, no-wrap
msgid "Deploying to Kind"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1034
msgid "https://kind.sigs.k8s.io/[Kind] is another popular tool used as a Kubernetes cluster for development purposes. To make the deployment to Kind experience as frictionless as possible, Quarkus provides the `quarkus-kind` extension. This extension can be added to a project like so:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1041
#, no-wrap
msgid ""
"<dependency>\n"
"    <groupId>io.quarkus</groupId>\n"
"    <artifactId>quarkus-kind</artifactId>\n"
"</dependency>\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1045
msgid "The purpose of this extension is to generate Kubernetes manifests (`kind.yaml` and `kind.json`) that are tailored to Kind and also to automate the process of loading images to the cluster when performing container image builds. The tailor made manifests will be pretty similar (they share the same rules) with Minikube (see above)."
msgstr ""

#. type: Title ==
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1046
#, no-wrap
msgid "Tuning the generated resources using application.properties"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1050
msgid "The Kubernetes extension allows tuning the generated manifest, using the `application.properties` file.  Here are some examples:"
msgstr ""

#. type: Title ===
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1051
#, no-wrap
msgid "Configuration options"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1054
msgid "The table below describe all the available configuration options."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1061
msgid "Properties that use non-standard types, can be referenced by expanding the property.  For example to define a `kubernetes-readiness-probe` which is of type `Probe`:"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1070
msgid "In this example `initial-delay` and `period` are fields of the type `Probe`.  Below you will find tables describing all available types."
msgstr ""

#. type: Title ====
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1071
#, no-wrap
msgid "Client Connection Configuration"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1074
msgid "You may need to configure the connection to your Kubernetes cluster.  By default, it automatically uses the active _context_ used by `kubectl`."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1076
msgid "For instance, if your cluster API endpoint uses a self-signed SSL Certificate you need to explicitly configure the client to trust it. You can achieve this by defining the following property:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1080
#, no-wrap
msgid "quarkus.kubernetes-client.trust-certs=true\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1083
msgid "The full list of the Kubernetes client configuration properties is provided below."
msgstr ""

#. type: Block title
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1088
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1194
#, no-wrap
msgid "OpenShift"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1091
msgid "One way to deploy an application to OpenShift is to use s2i (source to image) to create an image stream from the source and then deploy the image stream:"
msgstr ""

#. type: Block title
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1093
#, no-wrap
msgid "CLI"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1097
#, no-wrap
msgid ""
"quarkus extension remove kubernetes,jib\n"
"quarkus extension add openshift\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1100
#, no-wrap
msgid ""
"oc new-project quarkus-project\n"
"quarkus build -Dquarkus.container-image.build=true\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1105
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1120
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1135
#, no-wrap
msgid ""
"oc new-app --name=greeting  quarkus-project/kubernetes-quickstart:1.0.0-SNAPSHOT\n"
"oc expose svc/greeting\n"
"oc get route\n"
"curl <route>/greeting\n"
msgstr ""

#. type: Block title
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1108
#, no-wrap
msgid "Maven"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1112
#, no-wrap
msgid ""
"./mvnw quarkus:remove-extension -Dextensions=\"kubernetes, jib\"\n"
"./mvnw quarkus:add-extension -Dextensions=\"openshift\"\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1115
#, no-wrap
msgid ""
"oc new-project quarkus-project\n"
"./mvnw clean package -Dquarkus.container-image.build=true\n"
msgstr ""

#. type: Block title
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1123
#, no-wrap
msgid "Gradle"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1127
#, no-wrap
msgid ""
"./gradlew removeExtension --extensions=\"kubernetes, jib\"\n"
"./gradlew addExtension --extensions=\"openshift\"\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1130
#, no-wrap
msgid ""
"oc new-project quarkus-project\n"
"./gradlew build -Dquarkus.container-image.build=true\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1138
msgid "See further information in xref:deploying-to-openshift.adoc[Deploying to OpenShift]."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1140
#, no-wrap
msgid "A description of OpenShift resources and customisable properties is given below alongside Kubernetes resources to show similarities where applicable.   This includes an alternative to  `oc new-app ...` above, i.e. `oc apply -f target/kubernetes/openshift.json` .\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1142
msgid "To enable the generation of OpenShift resources, you need to include OpenShift in the target platforms:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1146
#, no-wrap
msgid "quarkus.kubernetes.deployment-target=openshift\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1149
msgid "If you need to generate resources for both platforms (vanilla Kubernetes and OpenShift), then you need to include both (comma separated)."
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1153
#, no-wrap
msgid "quarkus.kubernetes.deployment-target=kubernetes,openshift\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1157
msgid "Following the execution of `./mvnw package -Dquarkus.container-image.build=true` you will notice amongst the other files that are created, two files named `openshift.json` and `openshift.yml` in the `target/kubernetes/` directory."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1159
msgid "These manifests can be deployed as is to a running cluster, using `kubectl`:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1163
#, no-wrap
msgid "kubectl apply -f target/kubernetes/openshift.json\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1166
msgid "OpenShift's users might want to use `oc` rather than `kubectl`:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1170
#, no-wrap
msgid "oc apply -f target/kubernetes/openshift.json\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1174
msgid "For users that prefer to keep the `application.properties` independent of the deployment platform, the deployment target can be specified directly in the deploy command by adding `-Dquarkus.kubernetes.deployment-target=openshift` in addition to `-Dquarkus.kubernetes.deploy=true`. Furthermore, Quarkus allows collapsing the two properties into one: `-Dquarkus.openshift.deploy=true`."
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1178
#, no-wrap
msgid "./mvnw clean package -Dquarkus.openshift.deploy=true\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1181
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1281
msgid "The equivalent with gradle:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1185
#, no-wrap
msgid "./gradlew build -Dquarkus.openshift.deploy=true\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1188
msgid "In case that both properties are used with conflicting values `quarkus.kubernetes.deployment-target` is used."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1191
msgid "Quarkus also provides the xref:deploying-to-openshift.adoc[OpenShift] extension. This extension is basically a wrapper around the Kubernetes extension and relieves OpenShift users of the necessity of setting the `deployment-target` property to `openshift`"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1193
msgid "The OpenShift resources can be customized in a similar approach with Kubernetes."
msgstr ""

#. type: Block title
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1199
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1259
#, no-wrap
msgid "Knative"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1202
msgid "To enable the generation of Knative resources, you need to include Knative in the target platforms:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1206
#, no-wrap
msgid "quarkus.kubernetes.deployment-target=knative\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1210
msgid "Following the execution of `./mvnw package` you will notice amongst the other files that are created, two files named `knative.json` and `knative.yml` in the `target/kubernetes/` directory."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1212
msgid "If you look at either file you will see that it contains a Knative `Service`."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1214
msgid "The full source of the `knative.json` file looks something like this:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1248
#, no-wrap
msgid ""
"{\n"
"  {\n"
"    \"apiVersion\" : \"serving.quarkus.knative.dev/v1alpha1\",\n"
"    \"kind\" : \"Service\",\n"
"    \"metadata\" : {\n"
"      \"annotations\": {\n"
"       \"app.quarkus.io/vcs-uri\" : \"<some url>\",\n"
"       \"app.quarkus.io/commit-id\" : \"<some git SHA>\"\n"
"      },\n"
"      \"labels\" : {\n"
"        \"app.kubernetes.io/name\" : \"test-quarkus-app\",\n"
"        \"app.kubernetes.io/version\" : \"1.0.0-SNAPSHOT\"\n"
"      },\n"
"      \"name\" : \"knative\"\n"
"    },\n"
"    \"spec\" : {\n"
"      \"runLatest\" : {\n"
"        \"configuration\" : {\n"
"          \"revisionTemplate\" : {\n"
"            \"spec\" : {\n"
"              \"container\" : {\n"
"                \"image\" : \"dev.local/yourDockerUsername/test-quarkus-app:1.0.0-SNAPSHOT\",\n"
"                \"imagePullPolicy\" : \"Always\"\n"
"              }\n"
"            }\n"
"          }\n"
"        }\n"
"      }\n"
"    }\n"
"  }\n"
"}\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1251
msgid "The generated manifest can be deployed as is to a running cluster, using `kubectl`:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1255
#, no-wrap
msgid "kubectl apply -f target/kubernetes/knative.json\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1258
msgid "The generated service can be customized using the following properties:"
msgstr ""

#. type: Title ===
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1263
#, no-wrap
msgid "Deployment targets"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1267
msgid "Mentioned in the previous sections was the concept of `deployment-target`. This concept allows users to control which Kubernetes manifests will be generated and deployed to a cluster (if `quarkus.kubernetes.deploy` has been set to `true`)."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1271
msgid "By default, when no `deployment-target` is set, then only vanilla Kubernetes resources are generated and deployed. When multiple values are set (for example `quarkus.kubernetes.deployment-target=kubernetes,openshift`) then the resources for all targets are generated, but only the resources that correspond to the *first* target are applied to the cluster (if deployment is enabled)."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1274
msgid "For users that prefer to keep the `application.properties` independent of the deployment platform, the deployment target can be specified directly in the deploy command by adding `-Dquarkus.kubernetes.deployment-target=knative` in addition to `-Dquarkus.knative.deploy=true`. Furthermore, Quarkus allows collapsing the two properties into one: `-Dquarkus.knative.deploy=true`."
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1278
#, no-wrap
msgid "./mvnw clean package -Dquarkus.knative.deploy=true\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1285
#, no-wrap
msgid "./gradlew build -Dquarkus.knative.deploy=true\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1288
msgid "In case that both properties are used with conflicting values `-Dquarkus.kubernetes.deployment-target` is used."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1293
msgid "In the case of wrapper extensions like OpenShift and Minikube, when these extensions have been explicitly added to the project, the default `deployment-target` is set by those extensions. For example if `quarkus-minikube` has been added to a project, then `minikube` becomes the default deployment target and its resources will be applied to the Kubernetes cluster when deployment via `quarkus.kubernetes.deploy` has been set.  Users can still override the deployment-targets manually using `quarkus.kubernetes.deployment-target`."
msgstr ""

#. type: Title ===
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1294
#, no-wrap
msgid "Deprecated configuration"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1297
msgid "The following categories of configuration properties have been deprecated."
msgstr ""

#. type: Title ====
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1298
#, no-wrap
msgid "Properties without the quarkus prefix"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1301
msgid "In earlier versions of the extension, the `quarkus.` was missing from those properties. These properties are now deprecated."
msgstr ""

#. type: Title ====
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1302
#, no-wrap
msgid "Docker and S2i properties"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1305
msgid "The properties for configuring `docker` and `s2i` are also deprecated in favor of the new container-image extensions."
msgstr ""

#. type: Title ====
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1306
#, no-wrap
msgid "Config group arrays"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1309
msgid "Properties referring to config group arrays (e.g. `kubernetes.labels[0]`, `kubernetes.env-vars[0]` etc) have been converted to Maps to align with the rest of the Quarkus ecosystem."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1311
msgid "The code below demonstrates the change in `labels` config:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1317
#, no-wrap
msgid ""
"# Old labels config:\n"
"kubernetes.labels[0].name=foo\n"
"kubernetes.labels[0].value=bar\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1320
#, no-wrap
msgid ""
"# New labels\n"
"quarkus.kubernetes.labels.foo=bar\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1323
msgid "The code below demonstrates the change in `env-vars` config:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1329
#, no-wrap
msgid ""
"# Old env-vars config:\n"
"kubernetes.env-vars[0].name=foo\n"
"kubernetes.env-vars[0].configmap=my-configmap\n"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1332
#, no-wrap
msgid ""
"# New env-vars\n"
"quarkus.kubernetes.env-vars.foo.configmap=myconfigmap\n"
msgstr ""

#. type: Title ====
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1334
#, no-wrap
msgid "`env-vars` properties"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1338
msgid "`quarkus.kubernetes.env-vars` are deprecated (though still currently supported as of this writing) and the new declaration style should be used instead.  See xref:env-vars[Environment variables] and more specifically xref:env-vars-backwards[Backwards compatibility] for more details."
msgstr ""

#. type: Title ==
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1340
#, no-wrap
msgid "Deployment"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1344
msgid "To trigger building and deploying a container image you need to enable the `quarkus.kubernetes.deploy` flag (the flag is disabled by default - furthermore it has no effect during test runs or dev mode).  This can be easily done with the command line:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1348
#, no-wrap
msgid "./mvnw clean package -Dquarkus.kubernetes.deploy=true\n"
msgstr ""

#. type: Title ===
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1350
#, no-wrap
msgid "Building a container image"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1353
msgid "Building a container image is possible, using any of the 3 available `container-image` extensions:"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1355
msgid "xref:container-image.adoc#docker[Docker]"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1356
msgid "xref:container-image.adoc#jib[Jib]"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1357
msgid "xref:container-image.adoc#s2i[s2i]"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1359
msgid "Each time deployment is requested, a container image build will be implicitly triggered (no additional properties are required when the Kubernetes deployment has been enabled)."
msgstr ""

#. type: Title ===
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1360
#, no-wrap
msgid "Deploying"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1365
msgid "When deployment is enabled, the Kubernetes extension will select the resources specified by `quarkus.kubernetes.deployment-target` and deploy them.  This assumes that a `.kube/config` is available in your user directory that points to the target Kubernetes cluster.  In other words the extension will use whatever cluster `kubectl` uses. The same applies to credentials."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1367
msgid "At the moment no additional options are provided for further customization."
msgstr ""

#. type: Title ===
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1368
#, no-wrap
msgid "Remote Debugging"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1371
msgid "To remotely debug applications that are running on a kubernetes environment, we need to deploy the application as described in the previous section and add as new property: `quarkus.kubernetes.remote-debug.enabled=true`. This property will automatically configure the Java application to append the java agent configuration (for example: `-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5005`) and also the service resource to listen using the java agent port."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1373
msgid "After your application has been deployed with the debug enabled, next you need to tunnel the traffic from your local host machine to the specified port of the java agent:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1377
#, no-wrap
msgid "kubectl port-forward svc/<application name> 5005:5005\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1380
msgid "Using this command, you'll forward the traffic from the \"localhost:5005\" to the kubernetes service running the java agent using the port \"5005\" which is the one that the java agent uses by default for remote debugging. You can also configure another java agent port using the property `quarkus.kubernetes.remote-debug.address-port`."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1382
msgid "Finally, all you need to do is to configure your favorite IDE to attach the java agent process that is forwarded to `localhost:5005` and start to debug your application. For example, in IntelliJ IDEA, you can follow https://www.jetbrains.com/help/idea/tutorial-remote-debug.html[this tutorial] to debug remote applications."
msgstr ""

#. type: Title ==
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1383
#, no-wrap
msgid "Using existing resources"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1389
msgid "Sometimes it's desirable to either provide additional resources (e.g. a ConfigMap, a Secret, a Deployment for a database) or provide custom ones that will be used as a `base` for the generation process.  Those resources can be added under `src/main/kubernetes` directory and can be named after the target environment (e.g. kubernetes.json, openshift.json, knative.json, or the yml equivalents). The correlation between provided and generated files is done by file name.  So, a `kubernetes.json`/`kubernetes.yml` file added in `src/main/kubernetes` will only affect the generated `kubernetes.json`/`kubernetes.yml`. An `openshift.json`/`openshift.yml` file added in `src/main/kubernetes` will only affect the generated `openshift.json`/`openshift.yml`.  A `knative.json`/`knative.yml` file added in `src/main/kubernetes` will only affect the generated `knative.json`/`knative.yml` and so on. The provided file may be either in json or yaml format and may contain one or more resources. These resources will end up in both generated formats (json and yaml). For example, a secret added in `src/main/kubernetes/kubernetes.yml` will be added to both the generated `kubernetes.yml` and `kubernetes.json`."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1391
msgid "Note: At the time of writing there is no mechanism in place that allows a one-to-many relationship between provided and generated files. Minikube is not an exception to the rule above, so if you want to customize the generated minikube manifests, the file placed under `src/main/kubernetes` will have to be named `minikube.json` or `minikube.yml` (naming it `kubernetes.yml` or `kubernetes.json` will result in having only the generated `kubernetes.yml` and `kubernetes.json` affected)."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1394
msgid "Any resource found will be added in the generated manifests. Global modifications (e.g. labels, annotations) will also be applied to those resources.  If one of the provided resources has the same name as one of the generated ones, then the generated resource will be created on top of the provided resource, respecting existing content when possible (e.g. existing labels, annotations, environment variables, mounts, replicas etc)."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1396
msgid "The name of the resource is determined by the application name and may be overridden by `quarkus.kubernetes.name`, `quarkus.openshift.name` and `quarkus.knative.name`."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1398
msgid "For example, in the `kubernetes-quickstart` application, we can add a `kubernetes.yml` file in the `src/main/kubernetes` that looks like:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1425
#, no-wrap
msgid ""
"apiVersion: apps/v1\n"
"kind: Deployment\n"
"metadata:\n"
"  name: kubernetes-quickstart\n"
"  labels:\n"
"    app: quickstart\n"
"spec:\n"
"  replicas: 3\n"
"  selector:\n"
"    matchLabels:\n"
"      app: quickstart\n"
"  template:\n"
"    metadata:\n"
"      labels:\n"
"        app: quickstart\n"
"    spec:\n"
"      containers:\n"
"      - name: kubernetes-quickstart\n"
"        image: someimage:latest\n"
"        ports:\n"
"        - containerPort: 80\n"
"        env:\n"
"        - name: FOO\n"
"          value: BAR\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1428
msgid "The generated `kubernetes.yml` will look like:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1464
#, no-wrap
msgid ""
"apiVersion: \"apps/v1\"\n"
"kind: \"Deployment\"\n"
"metadata:\n"
"  annotations:\n"
"    app.quarkus.io/build-timestamp: \"2020-04-10 - 12:54:37 +0000\"\n"
"  labels:\n"
"    app: \"quickstart\"\n"
"  name: \"kubernetes-quickstart\"\n"
"spec:\n"
"  replicas: 3 <1>\n"
"  selector:\n"
"    matchLabels:\n"
"      app.kubernetes.io/name: \"kubernetes-quickstart\"\n"
"      app.kubernetes.io/version: \"1.0.0-SNAPSHOT\"\n"
"  template:\n"
"    metadata:\n"
"      annotations:\n"
"        app.quarkus.io/build-timestamp: \"2020-04-10 - 12:54:37 +0000\"\n"
"      labels:\n"
"        app: \"quickstart\" <2>\n"
"    spec:\n"
"      containers:\n"
"      - env:\n"
"        - name: \"FOO\" <3>\n"
"          value: \"BAR\"\n"
"        image: \"<<yourDockerUsername>>/kubernetes-quickstart:1.0.0-SNAPSHOT\" <4>\n"
"        imagePullPolicy: \"Always\"\n"
"        name: \"kubernetes-quickstart\"\n"
"        ports:\n"
"        - containerPort: 8080 <5>\n"
"          name: \"http\"\n"
"          protocol: \"TCP\"\n"
"      serviceAccount: \"kubernetes-quickstart\"\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1467
msgid "The provided replicas <1>, labels <2> and environment variables <3> were retained. However, the image <4> and container port <5> were modified. Moreover, the default annotations have been added."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1471
msgid "When the resource name does not match the application name (or the overridden name) rather than reusing the resource a new one will be added. Same goes for the container."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1473
msgid "When the name of the container does not match the application name (or the overridden name), container specific configuration will be ignored."
msgstr ""

#. type: Title ===
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1475
#, no-wrap
msgid "Using common resources"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1478
msgid "When generating the manifests for multiple deployment targets like Kubernetes, OpenShift or Knative, we can place the common resources in `src/main/kubernetes/common.yml`, so these resources will be integrated into the generated `kubernetes.json`/`kubernetes.yml`, and `openshift.json`/`openshift.yml` files (if you configure the Kubernetes and Openshift extensions at the same time)."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1480
msgid "For example, we can write a ConfigMap resource only once in the file `src/main/kubernetes/common.yml`:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1489
#, no-wrap
msgid ""
"apiVersion: v1\n"
"kind: ConfigMap\n"
"metadata:\n"
"  name: common-configmap\n"
"data:\n"
"  hello: world\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1492
msgid "And this config map resource will be integrated into the generated `kubernetes.json`/`kubernetes.yml`, and `openshift.json`/`openshift.yml` files."
msgstr ""

#. type: Title ==
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1493
#, no-wrap
msgid "Service Binding [[service_binding]]"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1496
msgid "Quarkus supports the link:https://github.com/servicebinding/spec[Service Binding Specification for Kubernetes] to bind services to applications."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1498
msgid "Specifically, Quarkus implements the link:https://github.com/servicebinding/spec#workload-projection[Workload Projection] part of the specification, therefore allowing applications to bind to services, such as a Database or a Broker, without the need for user configuration."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1500
msgid "To enable Service Binding for supported extensions, add the `quarkus-kubernetes-service-binding` extension to the application dependencies."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1502
msgid "The following extensions can be used with Service Binding and are supported for Workload Projection:"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1505
msgid "`quarkus-jdbc-mariadb`"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1506
msgid "`quarkus-jdbc-mssql`"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1507
msgid "`quarkus-jdbc-mysql`"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1508
msgid "`quarkus-jdbc-postgresql`"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1509
msgid "`quarkus-mongodb-client`"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1511
msgid "`quarkus-kafka-client`"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1512
msgid "`quarkus-smallrye-reactive-messaging-kafka`"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1514
msgid "`quarkus-reactive-db2-client`"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1515
msgid "`quarkus-reactive-mssql-client`"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1516
msgid "`quarkus-reactive-mysql-client`"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1517
msgid "`quarkus-reactive-oracle-client`"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1518
msgid "`quarkus-reactive-pg-client`"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1519
msgid "`quarkus-infinispan-client`"
msgstr ""

#. type: Title ===
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1522
#, no-wrap
msgid "Workload Projection"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1525
msgid "Workload Projection is a process of obtaining the configuration for services from the Kubernetes cluster. This configuration takes the form of directory structures that follow certain conventions and is attached to an application or to a service as a mounted volume. The `kubernetes-service-binding` extension uses this directory structure to create configuration sources, which allows you to configure additional modules, such as databases or message brokers."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1527
msgid "During application development, users can use workload projection to connect their application to a development database, or other locally-run services, without changing the actual application code or configuration."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1529
msgid "For an example of a workload projection where the directory structure is included in the test resources and passed to integration test, see the link:https://github.com/quarkusio/quarkus/tree/e7efe6b3efba91b9c4ae26f9318f8397e23e7505/integration-tests/kubernetes-service-binding-jdbc/src/test/resources/k8s-sb[Kubernetes Service Binding datasource] GitHub repository."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1533
msgid "The `k8s-sb` directory is the root of all service bindings. In this example, only one database called `fruit-db` is intended to be bound. This binding database has the `type` file, that indicates `postgresql` as the database type, while the other files in the directory provide the necessary information to establish the connection."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1535
msgid "After your Quarkus project obtains information from `SERVICE_BINDING_ROOT` environment variables that are set by OpenShift, you can locate generated configuration files that are present in the file system and use them to map the configuration-file values to properties of certain extensions."
msgstr ""

#. type: Title ==
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1538
#, no-wrap
msgid "Introduction to the Service Binding Operator"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1541
msgid "The link:https://github.com/redhat-developer/service-binding-operator[Service Binding Operator] is an Operator that implements link:https://github.com/servicebinding/spec[Service Binding Specification for Kubernetes] and is meant to simplify the binding of services to an application. Containerized applications that support link:https://github.com/servicebinding/spec#workload-projection[Workload Projection] obtain service binding information in the form of volume mounts. The Service Binding Operator reads binding service information and mounts it to the application containers that need it."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1543
msgid "The correlation between application and bound services is expressed through the `ServiceBinding` resources, which declares the intent of what services are meant to be bound to what application."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1545
msgid "The Service Binding Operator watches for `ServiceBinding` resources, which inform the Operator what applications are meant to be bound with what services. When a listed application is deployed, the Service Binding Operator collects all the binding information that must be passed to the application, then upgrades the application container by attaching a volume mount with the binding information."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1547
msgid "The Service Binding Operator completes the following actions:"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1549
msgid "Observes `ServiceBinding` resources for workloads intended to be bound to a particular service"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1550
msgid "Applies the binding information to the workload using volume mounts"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1552
msgid "The following chapter describes the automatic and semi-automatic service binding approaches and their use cases. With either approach, the `kubernetes-service-binding` extension generates a `ServiceBinding` resource. With the semi-automatic approach, users must provide a configuration for target services manually. With the automatic approach, for a limited set of services generating the `ServiceBinding` resource, no additional configuration is needed."
msgstr ""

#. type: Title ===
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1554
#, no-wrap
msgid "Semi-automatic service binding"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1557
msgid "A service binding process starts with a user specification of required services that will be bound to a certain application. This expression is summarized in the `ServiceBinding` resource that is generated by the `kubernetes-service-binding` extension. The use of the `kubernetes-service-binding` extensions helps users to generate `ServiceBinding` resources with minimal configuration, therefore simplifying the process overall."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1559
msgid "The Service Binding Operator responsible for the binding process then reads the information from the `ServiceBinding` resource and mounts the required files to a container accordingly."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1562
msgid "An example of the `ServiceBinding` resource:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1582
#, no-wrap
msgid ""
"apiVersion: binding.operators.coreos.com/v1beta1\n"
"kind: ServiceBinding\n"
"metadata:\n"
" name: binding-request\n"
" namespace: service-binding-demo\n"
"spec:\n"
" application:\n"
"   name: java-app\n"
"   group: apps\n"
"   version: v1\n"
"   resource: deployments\n"
" services:\n"
" - group: postgres-operator.crunchydata.com\n"
"   version: v1beta1\n"
"   kind: Database\n"
"   name: db-demo\n"
"   id: postgresDB\n"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1587
msgid "The `quarkus-kubernetes-service-binding` extension provides a more compact way of expressing the same information. For example:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1592
#, no-wrap
msgid ""
"quarkus.kubernetes-service-binding.services.db-demo.api-version=postgres-operator.crunchydata.com/v1beta1\n"
"quarkus.kubernetes-service-binding.services.db-demo.kind=Database\n"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1596
msgid "After adding the earlier configuration properties inside your `application.properties`, the `quarkus-kubernetes`, in combination with the `quarkus-kubernetes-service-binding` extension, automatically generates the `ServiceBinding` resource."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1598
msgid "The earlier mentioned `db-demo` property-configuration identifier now has a double role and also completes the following actions:"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1600
msgid "Correlates and groups `api-version` and `kind` properties together"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1601
msgid "Defines the `name` property for the custom resource with a possibility for a later edit. For example:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1607
#, no-wrap
msgid ""
"quarkus.kubernetes-service-binding.services.db-demo.api-version=postgres-operator.crunchydata.com/v1beta1\n"
"quarkus.kubernetes-service-binding.services.db-demo.kind=Database\n"
"quarkus.kubernetes-service-binding.services.db-demo.name=my-db\n"
msgstr ""

#. type: Block title
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1609
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1745
#, no-wrap
msgid "Additional resources"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1612
msgid "For a semi-automatic service binding demonstration, see link:https://developers.redhat.com/articles/2021/12/22/how-use-quarkus-service-binding-operator#create_the_quarkus_application[How to use Quarkus with the Service Binding Operator]"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1614
msgid "link:https://github.com/redhat-developer/service-binding-operator#known-bindable-operators[List of bindable Operators]"
msgstr ""

#. type: Title ===
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1616
#, no-wrap
msgid "Automatic service binding"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1619
msgid "The `quarkus-kubernetes-service-binding` extension can generate the `ServiceBinding` resource automatically after detecting that an application requires access to the external services that are provided by available bindable Operators."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1621
msgid "Automatic service binding can be generated for a limited number of service types. To be consistent with established terminology for Kubernetes and Quarkus services, this chapter refers to these service types as kinds."
msgstr ""

#. type: Block title
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1622
#, no-wrap
msgid "Operators that support the service auto-binding"
msgstr ""

#. type: Table
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1625
#, no-wrap
msgid "Operator"
msgstr ""

#. type: Table
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1625
#, no-wrap
msgid "API Version"
msgstr ""

#. type: Table
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1626
#, no-wrap
msgid "Kind"
msgstr ""

#. type: Table
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1626
#, no-wrap
msgid "`postgresql`"
msgstr ""

#. type: Table
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1626
#, no-wrap
msgid "link:https://operatorhub.io/operator/postgresql[CrunchyData Postgres]"
msgstr ""

#. type: Table
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1626
#, no-wrap
msgid "postgres-operator.crunchydata.com/v1beta1"
msgstr ""

#. type: Table
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1627
#, no-wrap
msgid "PostgresCluster"
msgstr ""

#. type: Table
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1627
#, no-wrap
msgid "`mysql`"
msgstr ""

#. type: Table
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1627
#, no-wrap
msgid "link:https://operatorhub.io/operator/percona-xtradb-cluster-operator[Percona XtraDB Cluster]"
msgstr ""

#. type: Table
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1627
#, no-wrap
msgid "pxc.percona.com/v1-9-0"
msgstr ""

#. type: Table
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1628
#, no-wrap
msgid "PerconaXtraDBCluster"
msgstr ""

#. type: Table
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1628
#, no-wrap
msgid "`mongo`"
msgstr ""

#. type: Table
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1628
#, no-wrap
msgid "link:https://operatorhub.io/operator/percona-server-mongodb-operator[Percona Mongo]"
msgstr ""

#. type: Table
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1628
#, no-wrap
msgid "psmdb.percona.com/v1-9-0"
msgstr ""

#. type: Table
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1629
#, no-wrap
msgid "PerconaServerMongoDB"
msgstr ""

#. type: Title ===
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1632
#, no-wrap
msgid "Automatic datasource binding"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1635
msgid "For traditional databases, automatic binding is initiated whenever a datasource is configured as follows:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1639
#, no-wrap
msgid "quarkus.datasource.db-kind=postgresql\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1642
msgid "The previous configuration, combined with the presence of `quarkus-datasource`, `quarkus-jdbc-postgresql`, `quarkus-kubernetes`, and `quarkus-kubernetes-service-binding` properties in the application, results in the generation of the `ServiceBinding` resource for the `postgresql` database type."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1644
msgid "By using the `apiVersion` and `kind` properties of the Operator resource, which matches the used `postgresql` Operator, the generated `ServiceBinding` resource binds the service or resource to the application."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1646
msgid "When you do not specify a name for your database service, the value of the `db-kind` property is used as the default name."
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1653
#, no-wrap
msgid ""
" services:\n"
" - apiVersion: postgres-operator.crunchydata.com/v1beta1\n"
"   kind: PostgresCluster\n"
"   name: postgresql\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1656
msgid "Specified the name of the datasource as follows:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1660
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1733
#, no-wrap
msgid "quarkus.datasource.fruits-db.db-kind=postgresql\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1663
msgid "The `service` in the generated `ServiceBinding` then displays as follows:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1670
#, no-wrap
msgid ""
" services:\n"
" - apiVersion: postgres-operator.crunchydata.com/v1beta1\n"
"   kind: PostgresCluster\n"
"   name: fruits-db\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1673
msgid "Similarly, if you use `mysql`, the name of the datasource can be specified as follows:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1677
#, no-wrap
msgid "quarkus.datasource.fruits-db.db-kind=mysql\n"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1680
msgid "The generated `service` contains the following:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1687
#, no-wrap
msgid ""
" services:\n"
" - apiVersion: pxc.percona.com/v1-9-0\n"
"   kind: PerconaXtraDBCluster\n"
"   name: fruits-db\n"
msgstr ""

#. type: Title ====
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1690
#, no-wrap
msgid "Customizing Automatic Service Binding"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1693
msgid "Even though automatic binding was developed to eliminate as much manual configuration as possible, there are cases where modifying the generated `ServiceBinding` resource might still be needed. The generation process exclusively relies on information extracted from the application and the knowledge of the supported Operators, which may not reflect what is deployed in the cluster. The generated resource is based purely on the knowledge of the supported bindable Operators for popular service kinds and a set of conventions that were developed to prevent possible mismatches, such as:"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1695
msgid "The target resource name does not match the datasource name"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1696
msgid "A specific Operator needs to be used rather than the default Operator for that service kind"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1697
msgid "Version conflicts that occur when a user needs to use any other version than default or latest"
msgstr ""

#. type: Block title
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1698
#, no-wrap
msgid "Conventions"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1701
msgid "The target resource coordinates are determined based on the type of Operator and the kind of service."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1702
msgid "The target resource name is set by default to match the service kind, such as `postgresql`, `mysql`, `mongo`."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1703
msgid "For named datasources, the name of the datasource is used."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1704
msgid "For named `mongo` clients, the name of the client is used."
msgstr ""

#. type: Block title
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1706
#, no-wrap
msgid "Example 1 - Name mismatch"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1709
msgid "For cases in which you need to modify the generated `ServiceBinding` to fix a name mismatch, use the `quarkus.kubernetes-service-binding.services` properties and specify the service's name as the service key."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1711
msgid "The `service key` is usually the name of the service, for example the name of the datasource, or the name of the `mongo` client. When this value is not available, the datasource type, such as `postgresql`, `mysql`, `mongo`, is used instead."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1713
msgid "To avoid naming conflicts between different types of services, prefix the `service key` with a specific datasource type, such as `postgresql-__<person>__`."
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1715
msgid "The following example shows how to customize the `apiVersion` property of the `PostgresCluster` resource:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1720
#, no-wrap
msgid ""
"quarkus.datasource.db-kind=postgresql\n"
"quarkus.kubernetes-service-binding.services.postgresql.api-version=postgres-operator.crunchydata.com/v1beta2\n"
msgstr ""

#. type: Block title
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1724
#, no-wrap
msgid "Example 2: Application of a custom name for a datasource"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1727
msgid "In Example 1, the `db-kind`(`postgresql`) was used as a service key. In this example, because the datasource is named, according to convention, the datasource name (`fruits-db`) is used instead."
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1729
msgid "The following example shows that for a named datasource, the datasource name is used as the name of the target resource:"
msgstr ""

#. type: Plain text
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1736
msgid "This has the same effect as the following configuration:"
msgstr ""

#. type: delimited block -
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1742
#, no-wrap
msgid ""
"quarkus.kubernetes-service-binding.services.fruits-db.api-version=postgres-operator.crunchydata.com/v1beta1\n"
"quarkus.kubernetes-service-binding.services.fruits-db.kind=PostgresCluster\n"
"quarkus.kubernetes-service-binding.services.fruits-db.name=fruits-db\n"
msgstr ""

#. type: delimited block =
#: upstream/_versions/main/guides/deploying-to-kubernetes.adoc:1746
msgid "For more details about the available properties and how do they work, see the link:https://github.com/servicebinding/spec#workload-projection[Workload Projection] part of the Service Binding specification."
msgstr ""

# SOME DESCRIPTIVE TITLE
# Copyright (C) YEAR Free Software Foundation, Inc.
# This file is distributed under the same license as the PACKAGE package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"POT-Creation-Date: 2023-09-21 08:08+0900\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#. type: YAML Front Matter: author
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:1
#, fuzzy, no-wrap
msgid "johara"
msgstr "johara"

#. type: YAML Front Matter: date
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:1
#, fuzzy, no-wrap
msgid "2022-11-24 00:00 +0100"
msgstr "2022-11-24 00:00 +0100"

#. type: YAML Front Matter: layout
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:1
#, fuzzy, no-wrap
msgid "post"
msgstr "posto"

#. type: YAML Front Matter: synopsis
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:1
#, fuzzy, no-wrap
msgid "By carefully fixing and designing a performance test to ensure that only Quarkus is being stressed, throughput improves from 1.75 req/sec to nearly 26,000 req/sec"
msgstr "Ao corrigir e conceber cuidadosamente um teste de desempenho para garantir que apenas o Quarkus está a ser sujeito a esforço, o débito melhora de 1,75 req/seg para quase 26 000 req/seg"

#. type: YAML Front Matter: tags
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:1
#, fuzzy, no-wrap
msgid "performance"
msgstr "desempenho"

#. type: YAML Front Matter: title
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:1
#, fuzzy, no-wrap
msgid "Reactive CRUD Performance: A Case Study"
msgstr "Desempenho do CRUD reativo: Um estudo de caso"

#. type: Plain text
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:12
#, fuzzy
msgid "We were approached for comment about the relative performance of Quarkus for a reactive CRUD workload.  This is a good case study into performance test design and some of the considerations required and hurdles that need to be overcome. What methodology can we derive for ensuring that the test we are performing is indeed the test that we are expecting?"
msgstr "Fomos contactados para comentar o desempenho relativo do Quarkus para uma carga de trabalho CRUD reactiva. Este é um bom caso de estudo sobre a conceção de testes de desempenho e algumas das considerações necessárias e obstáculos que têm de ser ultrapassados. Que metodologia podemos utilizar para garantir que o teste que estamos a realizar é, de facto, o teste que esperamos?"

#. type: Title ==
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:14
#, fuzzy, no-wrap
msgid "\"Why is Quarkus 600x times slower than `{INSERT_FRAMEWORK_HERE}`?!?\""
msgstr "\"Porque é que o Quarkus é 600 vezes mais lento do que o `{INSERT_FRAMEWORK_HERE}`?!?\""

#. type: Plain text
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:17
#, fuzzy
msgid "A recent report of bad result from Quarkus warranted some further investigation. On the face of it the results looked bad, really bad, for Quarkus."
msgstr "Um relatório recente sobre maus resultados da Quarkus justificou uma investigação mais aprofundada. À primeira vista, os resultados pareciam maus, muito maus, para a Quarkus."

#. type: Title ===
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:18
#, fuzzy, no-wrap
msgid "tl;dr"
msgstr "tl;dr"

#. type: Plain text
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:21
#, fuzzy
msgid "By correcting implementation errors in a benchmark test, and carefully designing the test environment to ensure that only the application is being stressed, Quarkus goes from handling *1.75 req/sec* to nearly *26,000 req/sec*. Each request queried and wrote to a MySQL database, using the same load driver and hardware."
msgstr "Ao corrigir erros de implementação num teste de referência e ao conceber cuidadosamente o ambiente de teste para garantir que apenas a aplicação está a ser sujeita a esforço, o Quarkus passa de um tratamento de *1,75 req/seg* para quase *26 000 req/seg*. Cada pedido consultava e escrevia numa base de dados MySQL, utilizando o mesmo controlador de carga e hardware."

#. type: Title ==
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:22
#, fuzzy, no-wrap
msgid "Test architecture"
msgstr "Arquitetura de teste"

#. type: Plain text
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:25
#, fuzzy
msgid "The test that was shared with us is a simple load test that updates a database via REST invocations;"
msgstr "O teste que foi partilhado connosco é um teste de carga simples que actualiza uma base de dados através de invocações REST;"

#. type: Target for macro image
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:26
#, no-wrap
msgid "reactiveBenchmark.png"
msgstr ""

#. type: Plain text
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:29
#, fuzzy
msgid "A load generator creates a continuous stream of HTTP POST requests to a REST api. In this case https://github.com/wg/wrk[wrk]"
msgstr "Um gerador de carga cria um fluxo contínuo de pedidos HTTP POST para uma API REST. Neste caso,  link:https://github.com/wg/wrk[o trabalho]"

#. type: Plain text
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:30
#, fuzzy
msgid "A Quarkus application process the request via https://quarkus.io/guides/resteasy-reactive[RESTEasy Reactive]"
msgstr "Uma aplicação Quarkus processa o pedido através do  link:https://quarkus.io/guides/resteasy-reactive[RESTEasy Reactive]"

#. type: Plain text
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:31
#, fuzzy
msgid "The Quarkus application queries and updates a MySQL database instance via https://hibernate.org/reactive/[Hibernate Reactive]"
msgstr "A aplicação Quarkus consulta e actualiza uma instância da base de dados MySQL através do  link:https://hibernate.org/reactive/[Hibernate Reactive]"

#. type: Plain text
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:33
#, fuzzy
msgid "The source code for the test can be found here: https://github.com/thiagohora/tutorials/tree/fix_jmeter_test"
msgstr "O código fonte do teste pode ser encontrado aqui:  https://github.com/thiagohora/tutorials/tree/fix_jmeter_test"

#. type: Plain text
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:35
#, fuzzy
msgid "To learn more about creating Reactive Applications with Quarkus, please read the https://quarkus.io/guides/getting-started-reactive[Getting Started With Reactive] guide"
msgstr "Para saber mais sobre a criação de aplicações reactivas com o Quarkus, leia o guia  link:https://quarkus.io/guides/getting-started-reactive[Getting Started With Reactive]"

#. type: Title ==
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:36
#, fuzzy, no-wrap
msgid "Initial Results image:emoji-unhappy.png[Unhappy, 35, 35]"
msgstr "Resultados iniciais  image:emoji-unhappy.png[alt=Unhappy]"

#. type: Plain text
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:40
#, fuzzy
msgid "Initial results for Quarkus were not promising;"
msgstr "Os primeiros resultados do Quarkus não foram prometedores;"

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:54
#, no-wrap
msgid ""
"$ wrk -t2 -c10 -d1m -s ./post_zipcode.lua --timeout 2m -H 'Host: localhost' http://localhost:8080\n"
"Running 1m test @ http://localhost:8080\n"
"  2 threads and 10 connections\n"
"  Thread Stats   Avg      Stdev     Max   +/- Stdev\n"
"    Latency     6.26s    10.29s   30.03s    77.78%\n"
"    Req/Sec    72.55     97.66   270.00     81.82%\n"
"  105 requests in 1.00m, 20.69KB read\n"
"  Socket errors: connect 0, read 10, write 0, timeout 0\n"
"  Non-2xx or 3xx responses: 10\n"
"Requests/sec:      1.75\n"
"Transfer/sec:     352.77B\n"
msgstr ""

#. type: Plain text
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:57
#, fuzzy
msgid "That was 105 requests in 60 seconds, with 10 errors. Only 95 requests had been successfully sent in 60 seconds, or *1.75 req/sec*"
msgstr "Foram 105 pedidos em 60 segundos, com 10 erros. Apenas 95 pedidos foram enviados com êxito em 60 segundos, ou seja, *1,75 req/seg*"

#. type: Plain text
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:59
#, fuzzy
msgid "Running the comparison test on my machine;"
msgstr "Executando o teste de comparação no meu computador;"

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:72
#, no-wrap
msgid ""
"$ wrk -t2 -c10 -d1m -s ./post_zipcode.lua --timeout 2m -H 'Host: localhost' http://localhost:8080\n"
"Running 1m test @ http://localhost:8080\n"
"  2 threads and 10 connections\n"
"  Thread Stats   Avg      Stdev     Max   +/- Stdev\n"
"    Latency    35.78ms   43.69ms 568.52ms   92.67%\n"
"    Req/Sec   171.93    113.83   777.00     80.61%\n"
"  20228 requests in 1.00m, 3.70MB read\n"
"Requests/sec:    336.86\n"
"Transfer/sec:     63.04KB\n"
"----\t\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:75
#, no-wrap
msgid "Overall, the request rate that Quarkus could support was only *1.75 req/sec!!* Ok, so it wasn't *600* times slower, but it was *192* times slower on my machine.\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:77
#, no-wrap
msgid "but... something was not correct, Quarkus was displaying the following exception in the service logs;\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:93
#, no-wrap
msgid ""
"```\n"
"2022-06-17 15:20:44,507 ERROR [org.hib.rea.errors] (vert.x-eventloop-thread-45) HR000057: Failed to execute statement [select zipcode0_.zip as zip1_0_0_, zipcode0_.city as city2_0_0_, zipcode0_.county as county3_0_0_, zipcode0_.state as state4_0_0_, zipcode0_.timezone as timezone5_0_0_, zipcode0_.type as type6_0_0_ from ZipCode zipcode0_ where zipcode0_.zip=?]: could not load an entity: [com.baeldung.quarkus_project.ZipCode#08231]: java.util.concurrent.CompletionException: io.vertx.core.impl.NoStackTraceThrowable: Timeout\n"
"\tat java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:332)\n"
"\tat java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:347)\n"
"\tat java.base/java.util.concurrent.CompletableFuture$UniApply.tryFire(CompletableFuture.java:636)\n"
"\tat java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)\n"
"\tat java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2162)\n"
"\tat io.vertx.core.Future.lambda$toCompletionStage$2(Future.java:362)\n"
"\t...\n"
"\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:503)\n"
"\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:986)\n"
"\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\n"
"\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n"
"\tat java.base/java.lang.Thread.run(Thread.java:833)\n"
"Caused by: io.vertx.core.impl.NoStackTraceThrowable: Timeout\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:95
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:124
#, no-wrap
msgid "```\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:97
#, no-wrap
msgid "An initial investigation showed that the number of open MySQL connections during the test was very high: **96 open connections**\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:111
#, no-wrap
msgid ""
"```\n"
"mysql> show status like '%onn%';\n"
"+-----------------------------------------------+---------------------+\n"
"| Variable_name                                 | Value               |\n"
"+-----------------------------------------------+---------------------+\n"
"...\n"
"| Max_used_connections                          | 96                  |\n"
"| Max_used_connections_time                     | 2022-06-17 14:20:07 |\n"
"...\n"
"| Threads_connected                             | 96                  |\n"
"+-----------------------------------------------+---------------------+\n"
"16 rows in set (0.01 sec)\n"
"```\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:113
#, no-wrap
msgid "And checking the number of inserts the application had managed to perform within 1minutes;\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:122
#, no-wrap
msgid ""
"```\n"
"mysql> select count(*) from ZipCode;\n"
"+----------+\n"
"| count(*) |\n"
"+----------+\n"
"|       95 |\n"
"+----------+\n"
"1 row in set (0.00 sec)\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:126
#, no-wrap
msgid "There was obviously something wrong with the database connections! Each connection was committing only a single value to the database and no more progress was being made. The number of entries in the database tallied _exactly_ with the number of successful HTTP requests.\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:128
#, no-wrap
msgid "Reviewing the CPU time for the Quarkus process confirmed that no further work was being done after the initial 95 commits to the database, the application was deadlocked;\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:131
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:191
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:211
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:271
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:322
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:373
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:417
#, no-wrap
msgid "[source,bash]\n"
msgstr ""

#. type: Plain text
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:134
#, fuzzy
msgid "$ pidstat -p 869871 1 Linux 5.17.11-200.fc35.x86_64 (localhost.localdomain) \t17/06/22 \t_x86_64_\t(32 CPU)"
msgstr "$ pidstat -p 869871 1 Linux 5.17.11-200.fc35.x86_64 (localhost.localdomain) 17/06/22 _x86_64_ (32 CPU)"

#. type: Plain text
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:141
#, fuzzy, no-wrap
msgid ""
"15:32:41      UID       PID    %usr %system  %guest   %wait    %CPU   CPU  Command\n"
"15:32:42     1000    869871    0.00    0.00    0.00    0.00    0.00    22  java\n"
"15:32:43     1000    869871    0.00    0.00    0.00    0.00    0.00    22  java\n"
"15:32:44     1000    869871    0.00    0.00    0.00    0.00    0.00    22  java\n"
"15:32:45     1000    869871    0.00    0.00    0.00    0.00    0.00    22  java\n"
"15:32:46     1000    869871    0.00    0.00    0.00    0.00    0.00    22  java\n"
msgstr "15:32:41 UID PID %usr %system %guest %wait %CPU CPU Command 15:32:42 1000 869871 0.00 0.00 0.00 0.00 0.00 0.00 22 java 15:32:43 1000 869871 0.00 0.00 0.00 0.00 0.00 22 java 15:32:44 1000 869871 0.00 0.00 0.00 0.00 0.00 0.00 22 java 15:32:45 1000 869871 0.00 0.00 0.00 0.00 0.00 0.00 22 java 15:32:46 1000 869871 0.00 0.00 0.00 0.00 0.00 22 java"

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:146
#, no-wrap
msgid ""
"[IMPORTANT]\n"
"====\n"
"*Is the application behaving as expected?*\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:149
#, no-wrap
msgid ""
"If the application is erroring, the results are not valid. Before continuing, investigate *why* the errors are occurring and fix the application.\n"
"====\n"
msgstr ""

#. type: Title ==
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:151
#, fuzzy, no-wrap
msgid "Initial inspection of code"
msgstr "Inspeção inicial do código"

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:154
msgid "A quick review of the code revealed the deadlocking issue;"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:156
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:175
msgid "[source,java]"
msgstr ""

#. type: Plain text
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:167
#, fuzzy, no-wrap
msgid ""
"@POST\n"
"@Transactional\n"
"public Uni<ZipCode> create(ZipCode zipCode) {\n"
"    return getById(zipCode.getZip())\n"
"        .onItem()\n"
"        .ifNull()\n"
"        .switchTo(createZipCode(zipCode))\n"
"        .onFailure(PersistenceException.class)\n"
"        .recoverWithUni(() -> getById(zipCode.getZip()));\n"
"}\n"
msgstr "@POST @Transactional public Uni&lt;ZipCode&gt; create(ZipCode zipCode) { return getById(zipCode.getZip()) .onItem() .ifNull() .switchTo(createZipCode(zipCode)) .onFailure(PersistenceException.class) .recoverWithUni) → getById(zipCode.getZip(); }"

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:170
#, no-wrap
msgid "Ah Ha! the endpoint is annotated with `@Transactional`. The application is using Hibernate Reactive, so instead we need to use the  `@ReactiveTransactional` annotation. For further details, please read the https://quarkus.io/guides/hibernate-reactive-panache#transactions[Simplified Hibernate Reactive with Panache] guide. This can be confusing, but conversations have started about how to clarify the different requirements and warn users if there is an issue.\n"
msgstr ""

#. type: Title ==
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:172
#, fuzzy, no-wrap
msgid "Quarkus Application Fixed image:emoji-happy.png[Happy, 35, 35]"
msgstr "Aplicação Quarkus corrigida  image:emoji-happy.png[alt=Happy]"

#. type: Plain text
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:186
#, fuzzy, no-wrap
msgid ""
"@POST\n"
"@ReactiveTransactional\n"
"public Uni<ZipCode> create(ZipCode zipCode) {\n"
"    return getById(zipCode.getZip())\n"
"        .onItem()\n"
"        .ifNull()\n"
"        .switchTo(createZipCode(zipCode))\n"
"        .onFailure(PersistenceException.class)\n"
"        .recoverWithUni(() -> getById(zipCode.getZip()));\n"
"}\n"
msgstr "@POST @ReactiveTransactional public Uni&lt;ZipCode&gt; create(ZipCode zipCode) { return getById(zipCode.getZip()) .onItem() .ifNull() .switchTo(createZipCode(zipCode)) .onFailure(PersistenceException.class) .recoverWithUni) → getById(zipCode.getZip(); }"

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:189
#, no-wrap
msgid "Let's try again:\n"
msgstr ""

#. type: Plain text
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:203
#, fuzzy, no-wrap
msgid ""
"$ wrk -t2 -c10 -d1m -s ./post_zipcode.lua --timeout 2m -H 'Host: localhost' http://localhost:8080\n"
"Running 1m test @ http://localhost:8080\n"
"  2 threads and 10 connections\n"
"  Thread Stats   Avg      Stdev     Max   +/- Stdev\n"
"    Latency    30.06ms   33.67ms 351.38ms   87.66%\n"
"    Req/Sec   197.60    145.88     1.14k    82.24%\n"
"  23427 requests in 1.00m, 4.60MB read\n"
"  Socket errors: connect 0, read 3, write 0, timeout 0\n"
"  Non-2xx or 3xx responses: 3\n"
"Requests/sec:    390.21\n"
"Transfer/sec:     78.40KB\n"
msgstr "$ wrk -t2 -c10 -d1m -s ./post_zipcode.lua --timeout 2m -H 'Host: localhost'  http://localhost:8080  Executando teste de 1m @  http://localhost:8080  2 threads e 10 conexões Thread Stats Avg Stdev Max +/- Stdev Latency 30.06ms 33.67ms 351.38ms 87.66% Req/Sec 197.60 145.88 1.14k 82.24% 23427 pedidos em 1.00m, 4.60MB lidos Erros de socket: ligação 0, leitura 3, escrita 0, timeout 0 Respostas não-2xx ou 3xx: 3 Pedidos/seg: 390.21 Transferência/seg: 78.40KB"

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:207
#, no-wrap
msgid "**390.21 req/sec!!** that's much better!!\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:209
#, no-wrap
msgid "With the test fixed, we can see a lot more data in the database table;\n"
msgstr ""

#. type: Plain text
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:219
#, fuzzy, no-wrap
msgid ""
"mysql> select count(*) from ZipCode;\n"
"+----------+\n"
"| count(*) |\n"
"+----------+\n"
"|    10362 |\n"
"+----------+\n"
"1 row in set (0.00 sec)\n"
msgstr "mysql&gt; select count( *) from ZipCode; ---------- | count(*) | ---------- | 10362 | ---------- 1 linha no conjunto (0.00 sec)"

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:222
#, no-wrap
msgid "NOTE: The test has been designed to query the database if a ZipCode already exists, before attempting to insert a new ZipCode. There are a finite number of ZipCodes, so as the test progresses, the number of ZipCode entries will tend towards the maximum number of ZipCodes. The workload progresses from being write heavy to read heavy.\n"
msgstr ""

#. type: Title ==
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:224
#, fuzzy, no-wrap
msgid "Same results image:emoji-unhappy.png[Unhappy, 35, 35]"
msgstr "Os mesmos resultados  image:emoji-unhappy.png[alt=Unhappy]"

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:227
msgid "but... my hard disk on my machine was making a **lot** of noise during the test! The Quarkus result of *390.21 req/sec* is suspiciously similar to the comparison baseline of *336.86 req/sec*, and..."
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:229
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:264
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:300
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:361
msgid "[source,bash]"
msgstr ""

#. type: Plain text
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:246
#, fuzzy, no-wrap
msgid ""
"$ pidstat -p 873146 1\n"
"...\n"
"15:46:29      UID       PID    %usr %system  %guest   %wait    %CPU   CPU  Command\n"
"15:46:30     1000    873146   59.00    6.00    0.00    0.00   65.00    12  java\n"
"15:46:31     1000    873146   57.00    4.00    0.00    0.00   61.00    12  java\n"
"15:46:32     1000    873146   50.00    3.00    0.00    0.00   53.00    12  java\n"
"15:46:33     1000    873146   27.00    5.00    0.00    0.00   32.00    12  java\n"
"15:46:34     1000    873146   32.00    3.00    0.00    0.00   35.00    12  java\n"
"15:46:35     1000    873146   50.00    4.00    0.00    0.00   54.00    12  java\n"
"15:46:36     1000    873146   27.00    3.00    0.00    0.00   30.00    12  java\n"
"15:46:37     1000    873146   27.00    4.00    0.00    0.00   31.00    12  java\n"
"15:46:38     1000    873146   39.00    4.00    0.00    0.00   43.00    12  java\n"
"15:46:39     1000    873146   48.00    2.00    0.00    0.00   50.00    12  java\n"
"15:46:40     1000    873146   40.00    2.00    0.00    0.00   42.00    12  java\n"
"15:46:41     1000    873146   28.00    5.00    0.00    0.00   33.00    12  java\n"
"15:46:42     1000    873146   23.00    4.00    0.00    0.00   27.00    12  java\n"
msgstr "$ pidstat -p 873146 1 ... 15:46:29 UID PID %usr %system %guest %wait %CPU CPU Command 15:46:30 1000 873146 59.00 6.00 0.00 0.00 0.00 65.00 12 java 15:46:31 1000 873146 57.00 4.00 0.00 0.00 61.00 12 java 15:46:32 1000 873146 50.00 3.00 0.00 0.00 0.00 53.00 12 java 15:46:33 1000 873146 27.00 5.00 0.00 0.00 0.00 32.00 12 java 15:46:34 1000 873146 32.00 3.00 0.00 0.00 35.00 12 java 15:46:35 1000 873146 50.00 4.00 0.00 0.00 54.00 12 java 15:46:36 1000 873146 27.00 3.00 0.00 0.00 0.00 30.00 12 java 15:46:37 1000 873146 27.00 4.00 0.00 0.00 31.00 12 java 15:46:38 1000 873146 39.00 4.00 0.00 0.00 43.00 12 java 15:46:39 1000 873146 48.00 2.00 0.00 0.00 50.00 12 java 15:46:40 1000 873146 40.00 2.00 0.00 0.00 42.00 12 java 15:46:41 1000 873146 28.00 5.00 0.00 0.00 33.00 12 java 15:46:42 1000 873146 23.00 4.00 0.00 0.00 27.00 12 java"

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:249
#, no-wrap
msgid "The application is using less than **0.5** cores on a **32** core machine... hmm!\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:253
#, no-wrap
msgid ""
"[IMPORTANT]\n"
"====\n"
"*Is the application the bottleneck?*\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:256
#, no-wrap
msgid ""
"If a *system component* is the performance bottleneck (i.e. not the application under test), we are not actually stress testing the application.\n"
"====\n"
msgstr ""

#. type: Title ==
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:258
#, fuzzy, no-wrap
msgid "Move to a faster Disk image:emoji-happy.png[Happy, 35, 35]"
msgstr "Mudar para um disco mais rápido  image:emoji-happy.png[alt=Happy]"

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:261
msgid "Let's move the database files to a faster disk;"
msgstr ""

#. type: Plain text
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:266
#, fuzzy
msgid "$ docker run -d --rm --name mysqldb --network=host -e MYSQL_ROOT_PASSWORD=root -e MYSQL_DATABASE=baeldung -v /home/user/mysqlData:/var/lib/mysql -d mysql:5.7.38 --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci"
msgstr "$ docker run -d --rm --name mysqldb --network=host -e MYSQL_ROOT_PASSWORD=root -e MYSQL_DATABASE=baeldung -v /home/user/mysqlData:/var/lib/mysql -d mysql:5.7.38 --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci"

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:269
#, no-wrap
msgid "and re-run the test\n"
msgstr ""

#. type: Plain text
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:283
#, fuzzy, no-wrap
msgid ""
"$ wrk -t2 -c10 -d1m -s ./post_zipcode.lua --timeout 2m -H 'Host: localhost' http://localhost:8080\n"
"Running 1m test @ http://localhost:8080\n"
"  2 threads and 10 connections\n"
"  Thread Stats   Avg      Stdev     Max   +/- Stdev\n"
"    Latency     2.97ms   17.85ms 319.79ms   98.44%\n"
"    Req/Sec    12.99k     6.45k   18.88k    77.23%\n"
"  1538167 requests in 1.00m, 301.75MB read\n"
"  Socket errors: connect 0, read 4, write 0, timeout 0\n"
"  Non-2xx or 3xx responses: 4\n"
"Requests/sec:  25599.85\n"
"Transfer/sec:      5.02MB\n"
msgstr "$ wrk -t2 -c10 -d1m -s ./post_zipcode.lua --timeout 2m -H 'Host: localhost'  http://localhost:8080  Executando teste de 1m @  http://localhost:8080  2 threads e 10 conexões Thread Stats Avg Stdev Max +/- Stdev Latency 2.97ms 17.85ms 319.79ms 98.44% Req/Sec 12.99k 6.45k 18.88k 77.23% 1538167 pedidos em 1.00m, 301.75MB lidos Erros de socket: ligação 0, leitura 4, escrita 0, timeout 0 Respostas não-2xx ou 3xx: 4 Pedidos/seg: 25599.85 Transferência/seg: 5.02MB"

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:287
#, no-wrap
msgid "Sit back, Relax and Profit! *25,599.85 req/sec!* \n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:291
#, no-wrap
msgid ""
"[IMPORTANT]\n"
"====\n"
"*Do not stop here!*\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:294
#, no-wrap
msgid ""
"While it is easy to claim we have resolved the issue, for comparisons, we still do not have a controlled environment to run tests!\n"
"====\n"
msgstr ""

#. type: Title ==
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:295
#, fuzzy, no-wrap
msgid "System bottleneck still exists image:emoji-unhappy.png[Unhappy, 35, 35]"
msgstr "O estrangulamento do sistema ainda existe  image:emoji-unhappy.png[alt=Unhappy]"

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:298
msgid "the Quarkus process is now using 4.5 cores..."
msgstr ""

#. type: Plain text
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:303
#, fuzzy
msgid "]$ pidstat -p 884208 1 Linux 5.17.11-200.fc35.x86_64 (localhost.localdomain) \t17/06/22 \t_x86_64_\t(32 CPU)"
msgstr "]$ pidstat -p 884208 1 Linux 5.17.11-200.fc35.x86_64 (localhost.localdomain) 17/06/22 _x86_64_ (32 CPU)"

#. type: Plain text
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:317
#, fuzzy, no-wrap
msgid ""
"16:12:50      UID       PID    %usr %system  %guest   %wait    %CPU   CPU  Command\n"
"16:12:51     1000    884208  294.00  175.00    0.00    0.00  469.00    26  java\n"
"16:12:52     1000    884208  305.00  173.00    0.00    0.00  478.00    26  java\n"
"16:12:53     1000    884208  304.00  173.00    0.00    0.00  477.00    26  java\n"
"16:12:54     1000    884208  299.00  169.00    0.00    0.00  468.00    26  java\n"
"16:12:55     1000    884208  296.00  173.00    0.00    0.00  469.00    26  java\n"
"16:12:56     1000    884208  298.00  171.00    0.00    0.00  469.00    26  java\n"
"16:12:57     1000    884208  308.00  175.00    0.00    0.00  483.00    26  java\n"
"16:12:58     1000    884208  301.00  177.00    0.00    0.00  478.00    26  java\n"
"16:12:59     1000    884208  305.00  166.00    0.00    0.00  471.00    26  java\n"
"16:13:00     1000    884208  304.00  169.00    0.00    0.00  473.00    26  java\n"
"16:13:01     1000    884208  307.00  172.00    0.00    0.00  479.00    26  java\n"
"16:13:02     1000    884208  301.00  174.00    0.00    0.00  475.00    26  java\n"
msgstr "16:12:50 UID PID %usr %system %guest %wait %CPU CPU Command 16:12:51 1000 884208 294.00 175.00 0.00 0.00 0.00 469.00 26 java 16:12:52 1000 884208 305.00 173.00 0.00 0.00 478.00 26 java 16:12:53 1000 884208 304.00 173.00 0.00 0.00 477.00 26 java 16:12:54 1000 884208 299.00 169.00 0.00 0.00 468.00 26 java 16:12:55 1000 884208 296.00 173.00 0.00 0.00 469.00 26 java 16:12:56 1000 884208 298.00 171.00 0.00 0.00 469.00 26 java 16:12:57 1000 884208 308.00 175.00 0.00 0.00 483.00 26 java 16:12:58 1000 884208 301.00 177.00 0.00 0.00 478.00 26 java 16:12:59 1000 884208 305.00 166.00 0.00 0.00 471.00 26 java 16:13:00 1000 884208 304.00 169.00 0.00 0.00 473.00 26 java 16:13:01 1000 884208 307.00 172.00 0.00 0.00 479.00 26 java 16:13:02 1000 884208 301.00 174.00 0.00 0.00 475.00 26 java"

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:320
#, no-wrap
msgid "but... the system is *60%* idle\n"
msgstr ""

#. type: Plain text
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:331
#, fuzzy, no-wrap
msgid ""
"$ vmstat 1\n"
"procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----\n"
" r  b swpd    free    buff   cache     si   so    bi    bo    in     cs us sy id wa st\n"
"14  0 5254976 9665088 590824 4895220    0    0     0     0 50997 715648 25 16 59  0  0\n"
"16  0 5254976 9667204 590824 4895220    0    0     0  1372 50995 710429 24 16 60  0  0\n"
"15  0 5254976 9666244 590824 4895232    0    0     0     0 51544 707477 24 16 59  0  0\n"
"11  0 5254976 9664892 590872 4895160    0    0     0   980 51178 700680 24 16 60  0  0\n"
"14  0 5254976 9662968 590880 4895232    0    0     0    12 54800 710039 25 16 59  0  0\n"
msgstr "$ vmstat 1 procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu----- r b swpd free buff cache si so bi bo in cs us sy id wa st 14 0 5254976 9665088 590824 4895220 0 0 0 0 50997 715648 25 16 59 0 0 16 0 5254976 9667204 590824 4895220 0 0 0 1372 50995 710429 24 16 60 0 0 15 0 5254976 9666244 590824 4895232 0 0 0 0 51544 707477 24 16 59 0 0 11 0 5254976 9664892 590872 4895160 0 0 0 980 51178 700680 24 16 60 0 0 14 0 5254976 9662968 590880 4895232 0 0 0 12 54800 710039 25 16 59 0 0"

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:334
#, no-wrap
msgid "We still have a bottleneck outside of the application, most likely within MySQL or we are still I/O bound!\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:336
#, no-wrap
msgid "At this point, we have a couple of options, we can either;\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:338
#, no-wrap
msgid " A) tune MySQL/IO so that they are no longer the bottleneck\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:340
#, no-wrap
msgid "or\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:342
#, no-wrap
msgid " B) constrain that application below the maximum, such that the rest of the system is operating within its limits\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:344
#, no-wrap
msgid "The easiest option is to simply constrain the application.  \n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:348
#, no-wrap
msgid ""
"[IMPORTANT]\n"
"====\n"
"*Choose your scaling methodology*\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:350
#, no-wrap
msgid "We can either scale up or tune the system, or we can scale down the application to below the limits of the system.\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:352
#, no-wrap
msgid "Choosing to scale up the system, or constrain the application, is a decision dependent on the goals of the testing.\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:354
#, no-wrap
msgid "====\n"
msgstr ""

#. type: Title ==
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:356
#, fuzzy, no-wrap
msgid "Constrain application image:emoji-happy.png[Happy, 35, 35]"
msgstr "Restringir a aplicação  image:emoji-happy.png[alt=Happy]"

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:359
msgid "We will remove the MySQL/System bottleneck by constraining the application to 4 CPU cores, therefore reducing the maximum load the application can drive to the database. We achieve this by running the application in docker;"
msgstr ""

#. type: Plain text
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:366
#, fuzzy
msgid "$ docker build -f ./src/main/docker/Dockerfile.jvm -t quarkus-project:0.1-SNAPSHOT .  ...  Successfully built 0cd0d50404ac Successfully tagged quarkus-project:0.1-SNAPSHOT"
msgstr "$ docker build -f ./src/main/docker/Dockerfile.jvm -t quarkus-project:0.1-SNAPSHOT . ... Construído com sucesso 0cd0d50404ac Marcado com sucesso quarkus-project:0.1-SNAPSHOT"

#. type: Plain text
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:368
#, fuzzy
msgid "$ docker run --network host --cpuset-cpus=0-3 quarkus-project:0.1-SNAPSHOT"
msgstr "$ docker run --network host --cpuset-cpus=0-3 quarkus-project:0.1-SNAPSHOT"

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:371
#, no-wrap
msgid "and re-running the test;\n"
msgstr ""

#. type: Plain text
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:385
#, fuzzy, no-wrap
msgid ""
"$ wrk -t2 -c10 -d1m -s ./post_zipcode.lua --timeout 2m -H 'Host: localhost' http://localhost:8080\n"
"Running 1m test @ http://localhost:8080\n"
"  2 threads and 10 connections\n"
"  Thread Stats   Avg      Stdev     Max   +/- Stdev\n"
"    Latency     5.36ms   44.30ms 766.89ms   98.94%\n"
"    Req/Sec     9.50k     4.45k   15.37k    78.52%\n"
"  1121692 requests in 1.00m, 220.06MB read\n"
"  Socket errors: connect 0, read 1, write 0, timeout 0\n"
"  Non-2xx or 3xx responses: 1\n"
"Requests/sec:  18667.87\n"
"Transfer/sec:      3.66MB\n"
msgstr "$ wrk -t2 -c10 -d1m -s ./post_zipcode.lua --timeout 2m -H 'Host: localhost'  http://localhost:8080  Executando teste de 1m @  http://localhost:8080  2 threads e 10 conexões Thread Stats Avg Stdev Max +/- Stdev Latency 5.36ms 44.30ms 766.89ms 98.94% Req/Sec 9.50k 4.45k 15.37k 78.52% 1121692 pedidos em 1.00m, 220.06MB lidos Erros de socket: ligação 0, leitura 1, escrita 0, timeout 0 Respostas não-2xx ou 3xx: 1 Pedidos/seg: 18667.87 Transferência/seg: 3.66MB"

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:388
#, no-wrap
msgid "Ok, so we are not at Max Throughput, but we *have* removed the system outside of the application as a bottleneck. *The bottleneck is NOW the application*\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:392
#, no-wrap
msgid ""
"[IMPORTANT]\n"
"====\n"
"*Create an environment where the comparisons are valid* \n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:394
#, no-wrap
msgid "By constraining the application, we are not running at absolute Max Throughput possible, _but_ we have created an environment that allows for comparisons between frameworks.\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:396
#, no-wrap
msgid "With a constrained application environment, we will not be in the situation where one or more frameworks are sustaining throughput levels that are at the limit of the system.  \n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:399
#, no-wrap
msgid ""
"If any application _is_ at the system limit, the results are invalid.\n"
"====\n"
msgstr ""

#. type: Title ==
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:400
#, fuzzy, no-wrap
msgid "All network traffic is not equal! image:emoji-unhappy.png[Unhappy, 35, 35]"
msgstr "Nem todo o tráfego de rede é igual!  image:emoji-unhappy.png[alt=Unhappy]"

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:403
msgid "Further investigation showed that Quarkus is not running with TLS enabled between the application and database, so database network traffic is running un-encrypted. Let's fix that;"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:405
msgid "[source,properties]"
msgstr ""

#. type: Plain text
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:412
#, fuzzy
msgid "quarkus.datasource.reactive.url=${DB_URL:mysql://localhost:3306/baeldung?useSSL=false&tlsVersion=TLSv1.2} quarkus.datasource.reactive.max-size=95 quarkus.datasource.reactive.mysql.ssl-mode=required #\"don't do this in prod, don't do this @ home, don't do this !\" #required for this test as mysql cert is self-signed quarkus.datasource.reactive.trust-all=true"
msgstr "quarkus.datasource.reactive.url=${DB_URL:mysql://localhost:3306/baeldung?useSSL=false&amp;tlsVersion=TLSv1.2} quarkus.datasource.reactive.max-size=95 quarkus.datasource.reactive.mysql.ssl-mode=required #\"não faça isto em produção, não faça isto em casa, não faça isto!\" #necessário para este teste porque o certificado mysql é auto-assinado quarkus.datasource.reactive.trust-all=true"

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:415
#, no-wrap
msgid "and re-run\n"
msgstr ""

#. type: Plain text
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:429
#, fuzzy, no-wrap
msgid ""
"$ wrk -t2 -c10 -d1m -s ./post_zipcode.lua --timeout 2m -H 'Host: localhost' http://localhost:8080\n"
"Running 1m test @ http://localhost:8080\n"
"  2 threads and 10 connections\n"
"  Thread Stats   Avg      Stdev     Max   +/- Stdev\n"
"    Latency     2.44ms   12.94ms 354.67ms   98.17%\n"
"    Req/Sec     7.55k     3.55k   11.94k    77.93%\n"
"  898541 requests in 1.00m, 176.26MB read\n"
"  Socket errors: connect 0, read 2, write 0, timeout 0\n"
"  Non-2xx or 3xx responses: 2\n"
"Requests/sec:  14955.61\n"
"Transfer/sec:      2.93MB\n"
msgstr "$ wrk -t2 -c10 -d1m -s ./post_zipcode.lua --timeout 2m -H 'Host: localhost'  http://localhost:8080  Executando teste de 1m @  http://localhost:8080  2 threads e 10 conexões Thread Stats Avg Stdev Max +/- Stdev Latency 2.44ms 12.94ms 354.67ms 98.17% Req/Sec 7.55k 3.55k 11.94k 77.93% 898541 pedidos em 1.00m, 176.26MB lidos Erros de socket: ligação 0, leitura 2, escrita 0, timeout 0 Respostas não-2xx ou 3xx: 2 Pedidos/seg: 14955.61 Transferência/seg: 2.93MB"

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:432
#, no-wrap
msgid "This provided us with a final, comparable throughput result of *14,955.61 req/sec*\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:437
#, no-wrap
msgid ""
"[IMPORTANT]\n"
"====\n"
"*For comparisons, we need to ensure that each framework is performing the same work*\n"
"====\n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:439
#, no-wrap
msgid "image::apples-to-oranges.png[]\n"
msgstr ""

#. type: Title ==
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:441
#, fuzzy, no-wrap
msgid "Results image:emoji-happy.png[Happy, 35, 35]"
msgstr "Resultados  image:emoji-happy.png[alt=Happy]"

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:444
msgid "Is Quarkus really 600x times slower than Framework X/Y/Z? *Of course not!*"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:446
msgid "On my machine;"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:452
msgid ". the initial result was *1.75 req/sec*.  . fixing the application brought that up to *390.21 req/sec* . fixing some of the system bottlenecks gave us **25,599.85 req/sec** . constraining the application, so that a fairer comparison with other frameworks can be made resulted in *18,667.87 req/sec* . and finally, enabling TLS encryption to the database gives a final result of *14,955.61 req/sec*"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:454
msgid "image::results.png[]"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:456
msgid "IMPORTANT: Run *5* gives us our baseline for comparison, *14,955.61 req/sec*"
msgstr ""

#. type: Title ===
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:458
#, fuzzy, no-wrap
msgid "Where does that leave Quarkus compared to Framework X/Y/Z?"
msgstr "Como é que isso deixa o Quarkus em relação ao Quadro X/Y/Z?"

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:461
msgid "well... that is an exercise for the reader ;-)"
msgstr ""

#. type: Title ==
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:463
#, fuzzy, no-wrap
msgid "Summary"
msgstr "Resumo"

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:467
msgid "Do these results show that Quarkus is quick? Well kinda, they hint at it, but there are still issues with the methodology that need resolving."
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:469
msgid "However, when faced with a benchmark result, especially one that does not appear to make sense, there are a number of steps you can take to validate the result;"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:476
#, no-wrap
msgid ""
" - *Fix the application*: Are there errors? Is the test functioning as expected? If there are errors, resolve them\n"
" - *Ensure the application is the bottleneck*: What are the limiting factors for the test? Is the test CPU, Network I/O, Disk I/O bound? \n"
" - *Do not stop evaluating the test when you see a _\"good\"_ result*. For comparisons, you need to ensure that _every_ framework is the limiting factor for performance and not the system.\n"
" - *Chose how to constrain the application*: either by scaling up the system, or scaling down the application.\n"
" - *Validate that all frameworks are doing the same work*. For comparisons, are the frameworks performing the same work? \n"
" - *Ensure al frameworks are providing the same level of security*. Are the semantics the same?  e.g. same TLS encoding? same db transaction isolation levels? \n"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:478
#, no-wrap
msgid "IMPORTANT: The System Under Test includes the *System*. Do not automatically _assume_ that your application is the bottleneck\n"
msgstr ""

#. type: Title ==
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:479
#, fuzzy, no-wrap
msgid "Notes on Methodology"
msgstr "Notas sobre a metodologia"

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:484
msgid "[CAUTION] ==== *Does this benchmark tell us everything we need to know about how Quarkus behaves under load? Not really! It gives us _one_ data point*"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:486
msgid "In order to have a meaningful understanding of behavior under load, the following issues with methodology need to be addressed;"
msgstr ""

#. type: delimited block -
#: upstream/_posts/2022-11-24-reactive-crud-performance-case-study.adoc:493
msgid "- Load generation, database and application are all running on a single machine. The current test does not stress any of the network stack and there are side effects due to co-location of services. The application topology needs to be representative of a production environment.  - This test does not measure application responsiveness from a _users perspective_. A tool that does not suffer from http://highscalability.com/blog/2015/10/5/your-load-generator-is-probably-lying-to-you-take-the-red-pi.html[coordinated omissions], such as https://hyperfoil.io/[Hyperfoil], is required to accurately measure service response time, including system wait time. *throughput != response time* and response time is what matters to users! - The mixture of read/writes to the database changes throughout the duration of the test. Initially the load is very write heavy, as time progresses, the database load is predominantly read heavy. A more consistent pattern of read/writes should be maintained throughout the test duration.  - The applications are not given time to correctly \"warm up\", therefore the results are a mixture of Java code running in interpreted mode and compiled mode.  - Due to the issue above, it is not possible to derive how a framework would behave with real-world production traffic from this test - As with any benchmarking, it is always best to *test a simulation of your production traffic* ===="
msgstr ""

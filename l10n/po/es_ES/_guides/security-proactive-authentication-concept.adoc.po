# SOME DESCRIPTIVE TITLE
# Copyright (C) YEAR Free Software Foundation, Inc.
# This file is distributed under the same license as the PACKAGE package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"POT-Creation-Date: 2023-04-26 15:18+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#. type: Title =
#: upstream/_guides/security-proactive-authentication-concept.adoc:7
#, fuzzy, no-wrap
msgid "Proactive authentication"
msgstr "Autenticación proactiva"

#. type: Plain text
#: upstream/_guides/security-proactive-authentication-concept.adoc:12
#, fuzzy
msgid "Proactive authentication is enabled in Quarkus by default. This means that if an incoming request has a credential then that request will always be authenticated, even if the target page does not require authentication."
msgstr "La autenticación proactiva está habilitada en Quarkus por defecto. Esto significa que si una solicitud entrante tiene una credencial, entonces esa solicitud siempre será autenticada, incluso si la página de destino no requiere autenticación."

#. type: Plain text
#: upstream/_guides/security-proactive-authentication-concept.adoc:16
#, fuzzy
msgid "Requests with an invalid credential will always be rejected, even when the page is public."
msgstr "Las solicitudes con una credencial no válida siempre serán rechazadas, incluso cuando la página sea pública."

#. type: Plain text
#: upstream/_guides/security-proactive-authentication-concept.adoc:18
#, fuzzy
msgid "You can change the default behavior if you only want to authenticate when the target page requires authentication."
msgstr "Puede cambiar el comportamiento predeterminado si sólo desea autenticarse cuando la página de destino requiera autenticación."

#. type: Plain text
#: upstream/_guides/security-proactive-authentication-concept.adoc:20
#, fuzzy
msgid "To disable proactive authentication in Quarkus, set the following attribute in the `application.properties` configuration file:"
msgstr "Para desactivar la autenticación proactiva en Quarkus, establezca el siguiente atributo en el archivo de configuración `application.properties`:"

#. type: delimited block -
#: upstream/_guides/security-proactive-authentication-concept.adoc:24
#, no-wrap
msgid "`quarkus.http.auth.proactive=false` \n"
msgstr ""

#. type: Plain text
#: upstream/_guides/security-proactive-authentication-concept.adoc:27
#, fuzzy
msgid "If you disable proactive authentication, the authentication process runs only when an identity is requested. An identity can be requested because of security rules that require the user to authenticate or because programmatic access to the current identity is required."
msgstr "Si desactiva la autenticación proactiva, el proceso de autenticación sólo se ejecuta cuando se solicita una identidad. Se puede solicitar una identidad debido a reglas de seguridad que requieren que el usuario se autentique o porque se requiere acceso programático a la identidad actual."

#. type: Plain text
#: upstream/_guides/security-proactive-authentication-concept.adoc:33
#, fuzzy
msgid "If proactive authentication is in use, accessing the `SecurityIdentity` is a blocking operation.  This is because authentication may have yet to happen, and accessing it may require calls to external systems, such as databases that may block.  For blocking applications, this is no problem. However, if you have disabled authentication in a reactive application, this will fail (as you cannot do blocking operations on the IO thread).  To work around this, you need to `@Inject` an instance of `io.quarkus.security.identity.CurrentIdentityAssociation` and call the `Uni<SecurityIdentity> getDeferredIdentity();` method.  You can then subscribe to the resulting `Uni` and will be notified when authentication is complete and the identity is available."
msgstr "Si se utiliza la autenticación proactiva, acceder a `SecurityIdentity` es una operación de bloqueo. Esto se debe a que puede que la autenticación aún no se haya producido, y acceder a ella puede requerir llamadas a sistemas externos, como bases de datos que pueden bloquearse. Para las aplicaciones que se bloquean, esto no supone ningún problema. Sin embargo, si has desactivado la autenticación en una aplicación reactiva, esto fallará (ya que no puedes realizar operaciones de bloqueo en el subproceso IO). Para evitarlo, es necesario `@Inject` una instancia de `io.quarkus.security.identity.CurrentIdentityAssociation` y llamar al método `Uni&amp;lt;SecurityIdentity&amp;gt; getDeferredIdentity();`. A continuación, puedes suscribirte al `Uni` resultante y recibirás una notificación cuando se complete la autenticación y la identidad esté disponible."

#. type: Plain text
#: upstream/_guides/security-proactive-authentication-concept.adoc:36
#, fuzzy
msgid "It's still possible to access the `SecurityIdentity` synchronously with `public SecurityIdentity getIdentity()` in the xref:resteasy-reactive.adoc[RESTEasy Reactive] from endpoints annotated with `@RolesAllowed`, `@Authenticated`, or with respective configuration authorization checks as authentication has already happened.  The same is also valid for the xref:reactive-routes.adoc[Reactive routes] if a route response is synchronous."
msgstr "Sigue siendo posible acceder a `SecurityIdentity` de forma sincrónica con `public SecurityIdentity getIdentity()` en  link:resteasy-reactive.html[RESTEasy Reactive] desde endpoints anotados con `@RolesAllowed`, `@Authenticated`, o con las comprobaciones de autorización de configuración respectivas, ya que la autenticación ya se ha producido. Lo mismo es válido para las  link:reactive-routes.html[rutas Re] active si una respuesta de ruta es sincrónica."

#. type: Plain text
#: upstream/_guides/security-proactive-authentication-concept.adoc:39
#, fuzzy
msgid "xref:security-authorization.adoc#standard-security-annotations[Standard security annotations] on CDI beans are not supported on IO thread if a non-void secured method returns a value synchronously and proactive authentication is disabled, as they need to access the `SecurityIdentity`.  In the example below, we have defined `HelloResource` and `HelloService`. It's easy to see that any GET request to `/hello` will run on IO thread and throw `BlockingOperationNotAllowedException` exception."
msgstr "Las  link:security-authorization.html#standard-security-annotations[anotaciones de seguridad estándar] en beans CDI no son soportadas en el hilo IO si un método asegurado no vacío devuelve un valor de forma sincrónica y la autenticación proactiva está deshabilitada, ya que necesitan acceder a `SecurityIdentity`. En el ejemplo de abajo, hemos definido `HelloResource` y `HelloService`. Es fácil ver que cualquier petición GET a `/hello` se ejecutará en el hilo IO y lanzará la excepción `BlockingOperationNotAllowedException`."

#. type: Plain text
#: upstream/_guides/security-proactive-authentication-concept.adoc:41
#, fuzzy
msgid "There is more than one way to fix the example:"
msgstr "Hay más de una forma de arreglar el ejemplo:"

#. type: Plain text
#: upstream/_guides/security-proactive-authentication-concept.adoc:43
#, fuzzy
msgid "switch to a worker thread (annotate `hello` endpoint with `@Blocking`)"
msgstr "cambiar a un hilo trabajador (anotar `hello` endpoint con `@Blocking`)"

#. type: Plain text
#: upstream/_guides/security-proactive-authentication-concept.adoc:44
#, fuzzy
msgid "change `sayHello` method return type (use reactive or asynchronous data type)"
msgstr "cambiar el tipo de retorno del método `sayHello` (utilizar un tipo de datos reactivo o asíncrono)"

#. type: Plain text
#: upstream/_guides/security-proactive-authentication-concept.adoc:45
#, fuzzy
msgid "arguably the safest way is to move `@RolesAllowed` annotation to the endpoint, as accessing `SecurityIdentity` from endpoint methods is never the blocking operation"
msgstr "Podría decirse que la forma más segura es mover la anotación `@RolesAllowed` al endpoint, ya que acceder a `SecurityIdentity` desde los métodos del endpoint nunca es una operación de bloqueo."

#. type: delimited block -
#: upstream/_guides/security-proactive-authentication-concept.adoc:52
#, no-wrap
msgid ""
"import jakarta.annotation.security.PermitAll;\n"
"import jakarta.inject.Inject;\n"
"import jakarta.ws.rs.GET;\n"
"import jakarta.ws.rs.Path;\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/security-proactive-authentication-concept.adoc:54
#, no-wrap
msgid "import io.smallrye.mutiny.Uni;\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/security-proactive-authentication-concept.adoc:58
#, no-wrap
msgid ""
"@Path(\"/hello\")\n"
"@PermitAll\n"
"public class HelloResource {\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/security-proactive-authentication-concept.adoc:61
#, no-wrap
msgid ""
"    @Inject\n"
"    HelloService helloService;\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/security-proactive-authentication-concept.adoc:66
#, no-wrap
msgid ""
"    @GET\n"
"    public Uni<String> hello() {\n"
"        return Uni.createFrom().item(helloService.sayHello());\n"
"    }\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/security-proactive-authentication-concept.adoc:68
#: upstream/_guides/security-proactive-authentication-concept.adoc:84
#, no-wrap
msgid "}\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/security-proactive-authentication-concept.adoc:74
#, no-wrap
msgid ""
"import jakarta.annotation.security.RolesAllowed;\n"
"import jakarta.enterprise.context.ApplicationScoped;\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/security-proactive-authentication-concept.adoc:77
#, no-wrap
msgid ""
"@ApplicationScoped\n"
"public class HelloService {\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/security-proactive-authentication-concept.adoc:82
#, no-wrap
msgid ""
"    @RolesAllowed(\"admin\")\n"
"    public String sayHello() {\n"
"        return \"Hello\";\n"
"    }\n"
msgstr ""

#. type: Title ==
#: upstream/_guides/security-proactive-authentication-concept.adoc:86
#, fuzzy, no-wrap
msgid "How to customize authentication exception responses"
msgstr "Cómo personalizar las respuestas de excepción de autenticación"

#. type: Plain text
#: upstream/_guides/security-proactive-authentication-concept.adoc:89
#, fuzzy
msgid "You can use Jakarta REST `ExceptionMapper` to capture Quarkus Security authentication exceptions such as `io.quarkus.security.AuthenticationFailedException`, for example:"
msgstr "Puede utilizar Jakarta REST `ExceptionMapper` para capturar excepciones de autenticación de Quarkus Security como `io.quarkus.security.AuthenticationFailedException`, por ejemplo:"

#. type: delimited block -
#: upstream/_guides/security-proactive-authentication-concept.adoc:93
#: upstream/_guides/security-proactive-authentication-concept.adoc:125
#, no-wrap
msgid "package io.quarkus.it.keycloak;\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/security-proactive-authentication-concept.adoc:99
#, no-wrap
msgid ""
"import jakarta.annotation.Priority;\n"
"import jakarta.ws.rs.Priorities;\n"
"import jakarta.ws.rs.core.Response;\n"
"import jakarta.ws.rs.ext.ExceptionMapper;\n"
"import jakarta.ws.rs.ext.Provider;\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/security-proactive-authentication-concept.adoc:101
#, no-wrap
msgid "import io.quarkus.security.AuthenticationFailedException;\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/security-proactive-authentication-concept.adoc:105
#, no-wrap
msgid ""
"@Provider\n"
"@Priority(Priorities.AUTHENTICATION)\n"
"public class AuthenticationFailedExceptionMapper implements ExceptionMapper<AuthenticationFailedException> {\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/security-proactive-authentication-concept.adoc:108
#, no-wrap
msgid ""
"    @Context\n"
"    UriInfo uriInfo;\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/security-proactive-authentication-concept.adoc:114
#, no-wrap
msgid ""
"    @Override\n"
"    public Response toResponse(AuthenticationFailedException exception) {\n"
"        return Response.status(401).header(\"WWW-Authenticate\", \"Basic realm=\\\"Quarkus\\\"\").build();\n"
"    }\n"
"}\n"
msgstr ""

#. type: Plain text
#: upstream/_guides/security-proactive-authentication-concept.adoc:121
#, fuzzy
msgid "Some HTTP authentication mechanisms need to handle authentication exceptions themselves to create a correct authentication challenge.  For example, `io.quarkus.oidc.runtime.CodeAuthenticationMechanism` which manages OpenId Connect authorization code flow authentication, needs to build a correct redirect URL, cookies, etc.  For that reason, using custom exception mappers to customize authentication exceptions thrown by such mechanisms is not recommended.  Instead, a safer approach would be to ensure that proactive authentication is enabled and to use Vert.x HTTP route failure handlers. This is because events come to the handler with the correct response status and headers.  You will then only need to customize the response, as outlined in the following example:"
msgstr "Algunos mecanismos de autenticación HTTP necesitan gestionar ellos mismos las excepciones de autenticación para crear un desafío de autenticación correcto. Por ejemplo, `io.quarkus.oidc.runtime.CodeAuthenticationMechanism` que gestiona la autenticación de flujo de código de autorización de OpenId Connect, necesita construir una URL de redirección correcta, cookies, etc. Por esta razón, no se recomienda utilizar mapeadores de excepciones personalizados para personalizar las excepciones de autenticación lanzadas por dichos mecanismos. En su lugar, un enfoque más seguro sería asegurarse de que la autenticación proactiva está habilitada y utilizar manejadores de fallos de ruta HTTP Vert.x. Esto se debe a que los eventos llegan al manejador con el estado de respuesta y las cabeceras correctas. A continuación, sólo tendrá que personalizar la respuesta, como se indica en el siguiente ejemplo:"

#. type: delimited block -
#: upstream/_guides/security-proactive-authentication-concept.adoc:128
#, no-wrap
msgid ""
"import jakarta.enterprise.context.ApplicationScoped;\n"
"import jakarta.enterprise.event.Observes;\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/security-proactive-authentication-concept.adoc:133
#, no-wrap
msgid ""
"import io.quarkus.security.AuthenticationFailedException;\n"
"import io.vertx.core.Handler;\n"
"import io.vertx.ext.web.Router;\n"
"import io.vertx.ext.web.RoutingContext;\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/security-proactive-authentication-concept.adoc:136
#, no-wrap
msgid ""
"@ApplicationScoped\n"
"public class AuthenticationFailedExceptionHandler {\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/security-proactive-authentication-concept.adoc:150
#, no-wrap
msgid ""
"    public void init(@Observes Router router) {\n"
"        router.route().failureHandler(new Handler<RoutingContext>() {\n"
"            @Override\n"
"            public void handle(RoutingContext event) {\n"
"                if (event.failure() instanceof AuthenticationFailedException) {\n"
"                    event.response().end(\"CUSTOMIZED_RESPONSE\");\n"
"                } else {\n"
"                    event.next();\n"
"                }\n"
"            }\n"
"        });\n"
"    }\n"
"}\n"
msgstr ""

#. type: Title ==
#: upstream/_guides/security-proactive-authentication-concept.adoc:152
#, fuzzy, no-wrap
msgid "References"
msgstr "Referencias"

#. type: Plain text
#: upstream/_guides/security-proactive-authentication-concept.adoc:155
#, fuzzy
msgid "xref:security-overview-concept.adoc[Quarkus Security overview]"
msgstr "link:security-overview-concept.html[Visión general de Quarkus Security]"

#. type: Plain text
#: upstream/_guides/security-proactive-authentication-concept.adoc:156
#, fuzzy
msgid "xref:security-architecture-concept.adoc[Quarkus Security architecture]"
msgstr "link:security-architecture-concept.html[Quarkus Arquitectura de seguridad]"

#. type: Plain text
#: upstream/_guides/security-proactive-authentication-concept.adoc:157
#, fuzzy
msgid "xref:security-authentication-mechanisms-concept.adoc#other-supported-authentication-mechanisms[Authentication mechanisms in Quarkus]"
msgstr "link:security-authentication-mechanisms-concept.html#other-supported-authentication-mechanisms[Mecanismos de autenticación en Quarkus]"

#. type: Plain text
#: upstream/_guides/security-proactive-authentication-concept.adoc:157
#, fuzzy
msgid "xref:security-identity-providers-concept.adoc[Identity providers]"
msgstr "link:security-identity-providers-concept.html[Proveedores de identidad]"

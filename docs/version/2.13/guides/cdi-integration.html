<!DOCTYPE html>
<html lang="pt">







<head>
  <title>Guia de Integração CDI - 2.13 - Quarkus</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Security-Policy" content="
  connect-src 'self' https://dpm.demdex.net https://adobedc.demdex.net https://analytics.ossupstream.org/ https://search.quarkus.io https://smetrics.redhat.com; 
  script-src 'self' 'unsafe-inline' 'unsafe-eval'
      
      https://assets.adobedtm.com
      js.bizographics.com
      https://www.redhat.com
      https://static.redhat.com
      https://app.requestly.io/
      jsonip.com
      https://ajax.googleapis.com
      https://use.fontawesome.com
      http://www.youtube.com
      http://www.googleadservices.com
      https://googleads.g.doubleclick.net
      https://giscus.app
      https://analytics.ossupstream.org/
      https://app.mailjet.com;

  style-src 'self' https://fonts.googleapis.com https://use.fontawesome.com; 
  img-src 'self' * data:; 
  media-src 'self'; 
  frame-src https://redhat.demdex.net https://www.youtube.com https://player.restream.io https://app.mailjet.com http://xy0p2.mjt.lu https://mj.quarkus.io https://giscus.app; 
  base-uri 'none'; 
  object-src 'none'; 
  form-action 'none'; 
  font-src 'self' https://use.fontawesome.com https://fonts.gstatic.com;" />
  <script id="adobe_dtm" src="https://www.redhat.com/dtm.js" type="text/javascript"></script>
  <script src="/assets/javascript/highlight.pack.js" type="text/javascript"></script>
  <META HTTP-EQUIV='X-XSS-Protection' CONTENT="1; mode=block">
  <META HTTP-EQUIV='X-Content-Type-Options' CONTENT="nosniff">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Quarkus: Supersonic Subatomic Java">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@QuarkusIO"> 
  <meta name="twitter:creator" content="@QuarkusIO">
  <meta property="og:url" content="https://quarkus.io/version/2.13/guides/cdi-integration" />
  <meta property="og:title" content="Guia de Integração CDI - 2.13" />
  <meta property="og:description" content="Quarkus: Supersonic Subatomic Java" />
  <meta property="og:image" content="https://quarkus.io/assets/images/quarkus_card.png" />
  
  <link rel="canonical" href="https://quarkus.io/guides/cdi-integration">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/guides/stylesheet/config.css" />
  <link rel="stylesheet" href="/assets/css/main.css?2021-07-29" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.5.2/css/all.css" crossorigin="anonymous">
  <link rel="alternate" type="application/rss+xml"  href="/feed.xml" title="Quarkus">
  <script src="/assets/javascript/hl.js" type="text/javascript"></script>
  
  
  
  
  <link rel="alternate" hreflang="en" href="https://quarkus.io/version/2.13/guides/cdi-integration" />
  
  <link rel="alternate" hreflang="pt-br" href="https://pt.quarkus.io/version/2.13/guides/cdi-integration" />
  
  <link rel="alternate" hreflang="es" href="https://es.quarkus.io/version/2.13/guides/cdi-integration" />
  
  <link rel="alternate" hreflang="zh" href="https://cn.quarkus.io/version/2.13/guides/cdi-integration" />
  
  <link rel="alternate" hreflang="ja" href="https://ja.quarkus.io/version/2.13/guides/cdi-integration" />
  
  <link rel="alternate" hreflang="x-default" href="https://quarkus.io/" />  
  <script src="/assets/javascript/tracking.js"></script>
  
  <script src="/assets/javascript/colormode.js" type="text/javascript"></script>

</head>

<body class="guides">

  


<div class="grid-wrapper communitysite">
  <div class="grid__item width-12-12">The <a href="https://quarkus.io/version/2.13/guides/cdi-integration">English version of quarkus.io</a> is the official project site. Translated sites are community supported on a best-effort basis.</div>
</div>


  <div class="nav-wrapper">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <input type="checkbox" id="checkbox" />
      <nav id="main-nav" class="main-nav">
        <div class="logo-wrapper">
           <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_600px_reverse.png" class="project-logo" title="Quarkus"></a>
        </div>
    <label class="nav-toggle" for="checkbox"> <i class="fa fa-bars"></i>
</label>
    <ul id="menu" class="menu">
      <li class="dropdown">
        <span href="#">Why<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          <li><a href="/about" class="">O QUE É QUARKUS?</a></li>
          <li><a href="/developer-joy" class="">ALEGRIA DO DESENVOLVEDOR</a></li>
          <li><a href="/performance" class="">PERFORMANCE</a></li>
          <li><a href="/kubernetes-native" class="">KUBERNETES NATIVO</a></li>
          <li><a href="/standards" class="">PADRÕES</a></li>
          <li><a href="/versatility" class="">VERSATILITY</a></li>
          <li><a href="/container-first" class="">CONTAINER PRIMEIRO</a></li>
          <li><a href="/spring" class="">USING SPRING?</a></li>
          <li class="tertiarydropdown">
            <span href="#">AI<i class="fas fa-chevron-down"></i></span>
            <ul class="tertiarymenu">
              <li><a href="/ai" class="">AI OVERVIEW</a></li>
              <li><a href="/java-for-ai" class="">JAVA FOR AI</a></li>
              <li><a href="/quarkus-for-ai" class="">WHY QUARKUS FOR AI</a></li>
              <li><a href="/ai-blueprints" class="">AI BLUEPRINTS</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="#">Learn<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          <li><a href="/get-started" class="">COMEÇAR</a></li>
          <li><a href="/guides" class="active">DOCUMENTAÇÃO</a></li>
          <li><a href="/userstories/" class="">USER STORIES</a></li>  
          <li><a href="/qtips" class="">VÍDEOS "Q" TIP</a></li>          
          <li><a href="/books" class="">LIVROS</a></li>
          </ul>
      </li>
      <li class="dropdown">
        <span href="#">Extensions<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          
          <!-- Note that quarkus.io is hardcoded here, because it is the only url which supports extensions -->
<li><a href="https://quarkus.io/extensions/" class="">PROCURAR EXTENSÕES</a></li>
          <li><a href="/faq/#what-is-a-quarkus-extension" class="">USAR
EXTENSÕES</a></li>
          <li><a href="/guides/writing-extensions" class="">CRIAR
EXTENSÕES</a></li>
          <li><a href="https://hub.quarkiverse.io" class="">COMPARTILHE EXTENSÕES</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="#">Community<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          <li><a href="/support/" class="">SUPORTE</a></li>
          <li><a href="/blog" class="">BLOG</a></li>
          <li><a href="/discussion" class="">DISCUSSÃO</a></li>
          <li><a href="/working-groups" class="">WORKING GROUPS</a></li>
          <li><a href="/insights" class="">PODCAST</a></li>
          <li><a href="/events" class="">EVENTOS</a></li>
          <li><a href="/newsletter" class="">BOLETIM INFORMATIVO</a></li>
          <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" class="">ROADMAP</a></li>
          <li><a href="/benefactors" class="">BENEFACTORS</a></li>
          </ul>
      </li>
      <li>
        <a href="https://code.quarkus.io" class="button-cta secondary white">COMECE
A CODIFICAR</a>
      </li>
      <li class="dropdown">
        <span href="/language/"><div class="fas fa-globe langicon"></div><i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="https://quarkus.io/version/2.13/guides/cdi-integration" >OFFICIAL (ENGLISH)</a></li>
          <li><a href="https://pt.quarkus.io/version/2.13/guides/cdi-integration">PORTUGUÊS (BR)</a></li>
          <li><a href="https://es.quarkus.io/version/2.13/guides/cdi-integration">ESPAÑOL</a></li>
          <li><a href="https://cn.quarkus.io/version/2.13/guides/cdi-integration">简体中文</a></li>
          <li><a href="https://ja.quarkus.io/version/2.13/guides/cdi-integration">日本語</a></li>
          </ul>
      </li>
      <li>
        <span href="#" class="modeswitcher" id='theme-toggle'><i class="fas
fa-sun"></i><i class="fas fa-moon"></i><i class="fas fa-cog"></i></span>
      </li>
    </ul>
      </nav>
    </div>
  </div>
</div>

  <div class="content">
    





<section class="full-width-version-bg flexfilterbar guides">
    <div class="guideflexcontainer">
        <div class="docslink">
            <a class="returnlink" href="/version/2.13/guides/"> Voltar aos Guias</a>
        </div>
        <div class="flexlabel">
            <label>Por Versão</label>
        </div>
        <div class="guidepulldown version">
            <select id="guide-version-dropdown">
                
                
                
                <option value="main" >Main - SNAPSHOT</option>
                
                
                
                <option value="latest" >3.28.5 - Latest</option>
                
                
                
                <option value="3.27" >3.27</option>
                
                
                
                <option value="3.20" >3.20</option>
                
                
                
                <option value="3.15" >3.15</option>
                
                
                
                <option value="3.8" >3.8</option>
                </select>
        </div>
    </div>
</section>

<div class="guide">
    <div class="grid-wrapper">
        <div class="grid__item width-8-12 width-12-12-m">
            <h1 class="text-caps">Guia de Integração CDI </h1>
            <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>ArC, the CDI container, is bootstrapped at build time.
The downside of this approach is that CDI Portable Extensions cannot be supported.
Nevertheless, the functionality can be achieved using the Quarkus-specific extensions API.</p>
</div>
<div class="paragraph">
<p>O contêiner é inicializado em várias fases. De uma perspectiva de alto nível, essas fases são as seguintes:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Inicialização</p>
</li>
<li>
<p>Descoberta do Bean</p>
</li>
<li>
<p>Registo de componentes sintéticos</p>
</li>
<li>
<p>Validação</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Na fase de <em>inicialização</em> , o trabalho preparatório está sendo realizado e os contextos personalizados são registrados. A <em>descoberta de beans</em> é o processo em que o contêiner analisa todas as classes da aplicação, identifica os beans e os conecta com base nos metadados fornecidos. Posteriormente, as extensões podem registrar <em>componentes sintéticos</em> . Os atributos desses componentes são totalmente controlados pelas extensões, ou seja, não são derivados de uma classe existente. Por fim, a <em>implementação é validada</em> . Por exemplo, o contêiner valida cada ponto de injeção na aplicação e falha a construção se não houver nenhum bean que satisfaça o tipo e os qualificadores exigidos.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can see more information about the bootstrap by enabling additional logging. Simply run the Maven build with <code>-X</code> or <code>--debug</code> and grep the lines that contain <code>io.quarkus.arc</code>. In the <a href="cdi-reference#dev-mode">development mode</a>, you can use <code>quarkus.log.category."io.quarkus.arc.processor".level=DEBUG</code> and two special endpoints are also registered automatically to provide some basic debug info in the JSON format.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>As etapas de construção do Quarkus podem produzir e consumir vários itens de construção e se conectar a cada fase. Nas seções a seguir, descreveremos todos os itens de construção relevantes e cenários comuns.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="metadata-sources"><a class="anchor" href="#metadata-sources"></a>1. Fontes de metadados</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Classes and annotations are the primary source of bean-level metadata.
The initial metadata are read from the <em>bean archive index</em>, an immutable <a href="https://github.com/wildfly/jandex" target="_blank" rel="noopener">Jandex index</a> which is built from various sources during <a href="cdi-reference#bean_discovery">bean discovery</a>.
However, extensions can add, remove or transform the metadata at certain stages of the bootstrap.
Moreover, extensions can also register <a href="#synthetic_beans">synthetic components</a>.
This is an important aspect to realize when integrating CDI components in Quarkus.</p>
</div>
<div class="paragraph">
<p>Dessa forma, as extensões podem transformar classes, que de outra forma seriam ignoradas, em beans e vice-versa. Por exemplo, uma classe que declara um método <code>@Scheduled</code> é sempre registrada como um bean, mesmo que não tenha sido anotada com uma anotação de definição de bean e, normalmente, seria ignorada.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="use-case-my-class-is-not-recognized-as-a-bean"><a class="anchor" href="#use-case-my-class-is-not-recognized-as-a-bean"></a>2. Caso de uso - Minha classe não é reconhecida como um Bean</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An <code>UnsatisfiedResolutionException</code> indicates a problem during <a href="cdi#typesafe_resolution">typesafe resolution</a>.
Sometimes an injection point cannot be satisfied even if there is a class on the classpath that appears to be eligible for injection.
There are several reasons why a class is not recognized and also several ways to fix it.
In the first step we should identify the <em>reason</em>.</p>
</div>
<div class="sect2">
<h3 id="additional_bean_build_item"><a class="anchor" href="#additional_bean_build_item"></a>2.1. <em>Razão 1</em>: Classe Não Está Descoberta</h3>
<div class="paragraph">
<p>Quarkus has a <a href="cdi-reference#bean_discovery">simplified discovery</a>.
It might happen that the class is not part of the application index.
For example, classes from the <em>runtime module</em> of a Quarkus extension are not indexed automatically.</p>
</div>
<div class="paragraph">
<p><em>Solução</em> : Use o <code>AdditionalBeanBuildItem</code> . Esse item de construção pode ser usado para especificar uma ou mais classes adicionais a serem analisadas durante a descoberta. As classes de bean adicionais são adicionadas de forma transparente ao índice da aplicação processado pelo contêiner.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
It is not possible to conditionally enable/disable additional beans via the <code>@IfBuildProfile</code>, <code>@UnlessBuildProfile</code>, <code>@IfBuildProperty</code> and <code>@UnlessBuildProperty</code> annotations as described in <a href="cdi-reference#enable_build_profile">cdi-reference</a> and <a href="cdi-reference#enable_build_properties">cdi-reference</a>. Extensions should inspect the configuration or the current profile and only produce an <code>AdditionalBeanBuildItem</code> if really needed.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Exemplo de <code>AdditionalBeanBuildItem</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@BuildStep
AdditionalBeanBuildItem additionalBeans() {
     return new AdditionalBeanBuildItem(SmallRyeHealthReporter.class, HealthServlet.class)); <i class="conum" data-value="1"></i><b>(1)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>AdditionalBeanBuildItem.Builder</code> pode ser utilizado para casos de uso mais complexos.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Bean classes added via <code>AdditionalBeanBuildItem</code> are <em>removable</em> by default.
If the container considers them <a href="cdi-reference#remove_unused_beans">unused</a>, they are just ignored.
However, you can use <code>AdditionalBeanBuildItem.Builder.setUnremovable()</code> method to instruct the container to never remove bean classes registered via this build item.
See also <a href="cdi-reference#remove_unused_beans">Removing Unused Beans</a> and <a href="#unremovable_builditem"><em>Motivo 3</em>: A Classe Foi Descoberta e Tem uma Anotação que Define o Bean, mas Foi Removida</a> for more details.</p>
</div>
<div class="paragraph">
<p>Também é possível definir o escopo padrão por meio de <code>AdditionalBeanBuildItem.Builder#setDefaultScope()</code> . O escopo padrão só é usado se não houver um escopo declarado na classe do bean.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Se não for especificado um escopo padrão, é utilizado o pseudo escopo <code>@Dependent</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="reason-2-class-is-discovered-but-has-no-bean-defining-annotation"><a class="anchor" href="#reason-2-class-is-discovered-but-has-no-bean-defining-annotation"></a>2.2. <em>Motivo 2</em>: A Classe É Descoberta mas Não Tem uma Anotação de Definição de Bean</h3>
<div class="paragraph">
<p>In Quarkus, the application is represented by a single bean archive with the <a href="https://jakarta.ee/specifications/cdi/2.0/cdi-spec-2.0.html#default_bean_discovery" target="_blank" rel="noopener">bean discovery mode <code>annotated</code></a>.
Therefore, bean classes that don&#8217;t have a <a href="https://jakarta.ee/specifications/cdi/2.0/cdi-spec-2.0.html#bean_defining_annotations" target="_blank" rel="noopener">bean defining annotation</a> are ignored.
Bean defining annotations are declared on the class-level and include scopes, stereotypes and <code>@Interceptor</code>.</p>
</div>
<div class="paragraph">
<p><em>Solução 1</em>: Utilizar o <code>AutoAddScopeBuildItem</code>. Este item de construção pode ser utilizado para adicionar um escopo a uma classe que satisfaça determinadas condições.</p>
</div>
<div class="listingblock">
<div class="title">Exemplo de <code>AutoAddScopeBuildItem</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@BuildStep
AutoAddScopeBuildItem autoAddScope() {
   return AutoAddScopeBuildItem.builder().containsAnnotations(SCHEDULED_NAME, SCHEDULES_NAME) <i class="conum" data-value="1"></i><b>(1)</b>
      .defaultScope(BuiltinScope.SINGLETON) <i class="conum" data-value="2"></i><b>(2)</b>
      .build();
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Encontrar todas as classes anotadas com <code>@Scheduled</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Adicione <code>@Singleton</code> como escopo padrão. As classes já anotadas com um escopo são ignoradas automaticamente.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><em>Solução 2</em>: Se precisar processar classes anotadas com uma anotação específica, é possível estender o conjunto de anotações que definem beans através do <code>BeanDefiningAnnotationBuildItem</code>.</p>
</div>
<div class="listingblock">
<div class="title">Exemplo de <code>BeanDefiningAnnotationBuildItem</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@BuildStep
BeanDefiningAnnotationBuildItem additionalBeanDefiningAnnotation() {
   return new BeanDefiningAnnotationBuildItem(Annotations.GRAPHQL_API); <i class="conum" data-value="1"></i><b>(1)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Adicionar <code>org.eclipse.microprofile.graphql.GraphQLApi</code> ao conjunto de anotações de definição de bean.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Bean classes added via <code>BeanDefiningAnnotationBuildItem</code> are <em>not removable</em> by default, i.e. the resulting beans must not be removed even if they are considered unused.
However, you can change the default behavior.
See also <a href="cdi-reference#remove_unused_beans">Removing Unused Beans</a> and <a href="#unremovable_builditem"><em>Motivo 3</em>: A Classe Foi Descoberta e Tem uma Anotação que Define o Bean, mas Foi Removida</a> for more details.</p>
</div>
<div class="paragraph">
<p>Também é possível especificar o escopo padrão. O escopo padrão é usado somente se não houver escopo declarado na classe do bean.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Se não for especificado um escopo padrão, é utilizado o pseudo escopo <code>@Dependent</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="unremovable_builditem"><a class="anchor" href="#unremovable_builditem"></a>2.3. <em>Motivo 3</em>: A Classe Foi Descoberta e Tem uma Anotação que Define o Bean, mas Foi Removida</h3>
<div class="paragraph">
<p>The container attempts to <a href="cdi-reference#remove_unused_beans">remove all unused beans</a> during the build by default.
This optimization allows for <em>framework-level dead code elimination</em>.
In few special cases, it&#8217;s not possible to correctly identify an unused bean.
In particular, Quarkus is not able to detect the usage of the <code>CDI.current()</code> static method yet.
Extensions can eliminate possible false positives by producing an <code>UnremovableBeanBuildItem</code>.</p>
</div>
<div class="listingblock">
<div class="title">Exemplo de <code>UnremovableBeanBuildItem</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@BuildStep
UnremovableBeanBuildItem unremovableBeans() {
   return UnremovableBeanBuildItem.targetWithAnnotation(STARTUP_NAME); <i class="conum" data-value="1"></i><b>(1)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Tornar todas as classes anotadas com <code>@Startup</code> não removíveis.</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="use-case-my-annotation-is-not-recognized-as-a-qualifier-or-an-interceptor-binding"><a class="anchor" href="#use-case-my-annotation-is-not-recognized-as-a-qualifier-or-an-interceptor-binding"></a>3. Caso de uso - Minha Anotação não É Reconhecida Como Um Qualificador ou Uma Ligação de Interceptador</h2>
<div class="sectionbody">
<div class="paragraph">
<p>É provável que a classe de anotação não faça parte do índice da aplicação. Por exemplo, as classes do <em>módulo de tempo de execução</em> de uma extensão do Quarkus não são indexadas automaticamente.</p>
</div>
<div class="paragraph">
<p><em>Solution</em>: Use the <code>AdditionalBeanBuildItem</code> as described in <a href="#additional_bean_build_item"><em>Razão 1</em>: Classe Não Está Descoberta</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="annotations_transformer_build_item"><a class="anchor" href="#annotations_transformer_build_item"></a>4. Use Case - I Need To Transform Metadata</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In some cases, it&#8217;s useful to be able to modify the metadata.
Quarkus provides a powerful alternative to <a href="https://jakarta.ee/specifications/cdi/2.0/cdi-spec-2.0.html#process_annotated_type" target="_blank" rel="noopener"><code>javax.enterprise.inject.spi.ProcessAnnotatedType</code></a>.
With an <code>AnnotationsTransformerBuildItem</code> it&#8217;s possible to override the annotations that exist on bean classes.</p>
</div>
<div class="paragraph">
<p>For example, you might want to add an interceptor binding to a specific bean class.
Here is how to do it:</p>
</div>
<div class="listingblock">
<div class="title">Exemplo de <code>AnnotationsTransformerBuildItem</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@BuildStep
AnnotationsTransformerBuildItem transform() {
   return new AnnotationsTransformerBuildItem(new AnnotationsTransformer() {

      public boolean appliesTo(org.jboss.jandex.AnnotationTarget.Kind kind) {
         return kind == org.jboss.jandex.AnnotationTarget.Kind.CLASS; <i class="conum" data-value="1"></i><b>(1)</b>
      }

      public void transform(TransformationContext context) {
         if (context.getTarget().asClass().name().toString().equals("org.acme.Bar")) {
            context.transform().add(MyInterceptorBinding.class).done(); <i class="conum" data-value="2"></i><b>(2)</b>
         }
      }
    });
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>O transformador só é aplicado às classes.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Se o nome da classe for igual a <code>org.acme.Bar</code>, adicione <code>@MyInterceptorBinding</code>. Não se esqueça de invocar <code>Transformation#done()</code>.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Tenha em mente que os transformadores de anotação devem ser produzidos <em>antes</em> do início da descoberta de bean.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>As etapas de construção podem consultar as anotações transformadas para um determinado alvo de anotação através do <code>TransformedAnnotationsBuildItem</code>.</p>
</div>
<div class="listingblock">
<div class="title">Exemplo de <code>TransformedAnnotationsBuildItem</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@BuildStep
void queryAnnotations(TransformedAnnotationsBuildItem transformedAnnotations, BuildProducer&lt;MyBuildItem&gt; myBuildItem) {
   ClassInfo myClazz = ...;
   if (transformedAnnotations.getAnnotations(myClazz).isEmpty()) { <i class="conum" data-value="1"></i><b>(1)</b>
     myBuildItem.produce(new MyBuildItem());
   }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>TransformedAnnotationsBuildItem.getAnnotations()</code> devolverá um conjunto de anotações possivelmente transformadas.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
There are other build items specialized in transformation: <a href="#additional_interceptor_bindings">Caso de Uso - Ligações de Interceptadores Adicionais</a> and <a href="#injection_point_transformation">Caso de Uso - Transformação de Pontos de Injeção</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="inspect_beans"><a class="anchor" href="#inspect_beans"></a>5. Caso de Uso - Inspecionar Beans, Observadores e Pontos de Injeção</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="solution-1-beandiscoveryfinishedbuilditem"><a class="anchor" href="#solution-1-beandiscoveryfinishedbuilditem"></a>5.1. <em>Solução 1</em>: <code>BeanDiscoveryFinishedBuildItem</code></h3>
<div class="paragraph">
<p>Os consumidores do <code>BeanDiscoveryFinishedBuildItem</code> podem inspecionar facilmente todos os beans, observadores e pontos de injeção baseados em classe registrados na aplicação. No entanto, os beans e observadores sintéticos <em>não são incluídos</em> porque esse item de construção é produzido <em>antes</em> que os componentes sintéticos sejam registrados.</p>
</div>
<div class="paragraph">
<p>Além disso, o resolvedor de beans retornado por <code>BeanDiscoveryFinishedBuildItem#getBeanResolver()</code> pode ser utilizado para aplicar as regras de resolução de tipagem segura, por exemplo, para descobrir se existe um bean que satisfaça uma determinada combinação de tipo e qualificadores necessários.</p>
</div>
<div class="listingblock">
<div class="title">Exemplo de <code>BeanDiscoveryFinishedBuildItem</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@BuildStep
void doSomethingWithNamedBeans(BeanDiscoveryFinishedBuildItem beanDiscovery, BuildProducer&lt;NamedBeansBuildItem&gt; namedBeans) {
   List&lt;BeanInfo&gt; namedBeans = beanDiscovery.beanStream().withName().collect(toList())); <i class="conum" data-value="1"></i><b>(1)</b>
   namedBeans.produce(new NamedBeansBuildItem(namedBeans));
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>A lista resultante não conterá beans sintéticos <code>@Named</code>.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="solution-2-synthesisfinishedbuilditem"><a class="anchor" href="#solution-2-synthesisfinishedbuilditem"></a>5.2. <em>Solução 2</em>: <code>SynthesisFinishedBuildItem</code></h3>
<div class="paragraph">
<p>Os consumidores de <code>SynthesisFinishedBuildItem</code> podem inspecionar facilmente todos os beans, observadores e pontos de injeção registrados na aplicação. Os beans e observadores sintéticos estão incluídos porque este item de construção é produzido <em>depois</em> dos componentes sintéticos serem registrados.</p>
</div>
<div class="paragraph">
<p>Além disso, o resolvedor de beans retornado por <code>SynthesisFinishedBuildItem#getBeanResolver()</code> pode ser utilizado para aplicar as regras de resolução de tipagem segura, por exemplo, para descobrir se existe um bean que satisfaça uma determinada combinação de tipo e qualificadores necessários.</p>
</div>
<div class="listingblock">
<div class="title">Exemplo de <code>SynthesisFinishedBuildItem</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@BuildStep
void doSomethingWithNamedBeans(SynthesisFinishedBuildItem synthesisFinished, BuildProducer&lt;NamedBeansBuildItem&gt; namedBeans) {
   List&lt;BeanInfo&gt; namedBeans = synthesisFinished.beanStream().withName().collect(toList())); <i class="conum" data-value="1"></i><b>(1)</b>
   namedBeans.produce(new NamedBeansBuildItem(namedBeans));
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>A lista resultante conterá beans sintéticos <code>@Named</code>.</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="synthetic_beans"><a class="anchor" href="#synthetic_beans"></a>6. Caso de Uso - A Necessidade de Beans Sintéticos</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Sometimes it is practical to be able to register a <em>synthetic bean</em>.
Bean attributes of a synthetic bean are not derived from a Java class, method or field.
Instead, all the attributes are defined by an extension.
In regular CDI, this could be achieved using the <a href="https://jakarta.ee/specifications/cdi/2.0/cdi-spec-2.0.html#after_bean_discovery" target="_blank" rel="noopener"><code>AfterBeanDiscovery.addBean()</code></a> methods.</p>
</div>
<div class="paragraph">
<p><em>Solução</em>: Se for necessário registrar um bean sintético, utilize o <code>SyntheticBeanBuildItem</code>.</p>
</div>
<div class="listingblock">
<div class="title">Exemplo 1 de <code>SyntheticBeanBuildItem</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@BuildStep
SyntheticBeanBuildItem syntheticBean() {
   return SyntheticBeanBuildItem.configure(String.class)
             .qualifiers(new MyQualifierLiteral())
             .creator(mc -&gt; mc.returnValue(mc.load("foo"))) <i class="conum" data-value="1"></i><b>(1)</b>
             .done();
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Generate the bytecode of the <code>javax.enterprise.context.spi.Contextual#create(CreationalContext&lt;T&gt;)</code> implementation.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A saída de um configurador de bean é gravada como bytecode. Portanto, há algumas limitações na forma como uma instância de bean sintético é criada em tempo de execução. Você pode:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Gerar o bytecode do método <code>Contextual#create(CreationalContext&lt;T&gt;)</code> diretamente através do <code>ExtendedBeanConfigurator.creator(Consumer&lt;MethodCreator&gt;)</code>.</p>
</li>
<li>
<p>Pass a <code>io.quarkus.arc.BeanCreator</code> implementation class via <code>ExtendedBeanConfigurator#creator(Class&lt;? extends BeanCreator&lt;U&gt;&gt;)</code>, and possibly specify some parameters via <code>ExtendedBeanConfigurator#param()</code>.</p>
</li>
<li>
<p>Produce the runtime instance through a proxy returned from a <a href="writing-extensions#bytecode-recording"><code>@Recorder</code> method</a> and set it via <code>ExtendedBeanConfigurator#runtimeValue(RuntimeValue&lt;?&gt;)</code> or <code>ExtendedBeanConfigurator#supplier(Supplier&lt;?&gt;)</code>.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">Exemplo 2 de <code>SyntheticBeanBuildItem</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@BuildStep
@Record(STATIC_INIT) <i class="conum" data-value="1"></i><b>(1)</b>
SyntheticBeanBuildItem syntheticBean(TestRecorder recorder) {
   return SyntheticBeanBuildItem.configure(Foo.class).scope(Singleton.class)
                .runtimeValue(recorder.createFoo()) <i class="conum" data-value="2"></i><b>(2)</b>
                .done();
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Por padrão, um bean sintético é inicializado durante <code>STATIC_INIT</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>A instância do bean é fornecida por um valor retornado por um método de gravação.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>It is possible to mark a synthetic bean to be initialized during <code>RUNTIME_INIT</code>.
See the <a href="writing-extensions#bootstrap-three-phases">Three Phases of Bootstrap and Quarkus Philosophy</a> for more information about the difference between <code>STATIC_INIT</code> and <code>RUNTIME_INIT</code>.</p>
</div>
<div class="listingblock">
<div class="title">Exemplo de <code>RUNTIME_INIT</code> <code>SyntheticBeanBuildItem</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@BuildStep
@Record(RUNTIME_INIT) <i class="conum" data-value="1"></i><b>(1)</b>
SyntheticBeanBuildItem syntheticBean(TestRecorder recorder) {
   return SyntheticBeanBuildItem.configure(Foo.class).scope(Singleton.class)
                .setRuntimeInit() <i class="conum" data-value="2"></i><b>(2)</b>
                .runtimeValue(recorder.createFoo())
                .done();
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>O gravador deve ser executado na fase <code>ExecutionTime.RUNTIME_INIT</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>A instância do bean é inicializada durante <code>RUNTIME_INIT</code>.</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Os beans sintéticos inicializados durante <code>RUNTIME_INIT</code> não devem ser acessados durante <code>STATIC_INIT</code>. As etapas de construção de <code>RUNTIME_INIT</code> que acessam um bean sintético inicializado em tempo de execução devem consumir o <code>SyntheticBeansRuntimeInitBuildItem</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@BuildStep
@Record(RUNTIME_INIT)
@Consume(SyntheticBeansRuntimeInitBuildItem.class) <i class="conum" data-value="1"></i><b>(1)</b>
void accessFoo(TestRecorder recorder) {
   recorder.foo(); <i class="conum" data-value="2"></i><b>(2)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Este passo de construção deve ser executado após a conclusão de <code>syntheticBean()</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Este método de gravação resulta numa invocação da instância do bean <code>Foo</code> e, por isso, temos de nos certificar de que a etapa de construção é executada depois de todos os beans sintéticos serem inicializados.</td>
</tr>
</table>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Também é possível utilizar o <code>BeanRegistrationPhaseBuildItem</code> para registrar um bean sintético. No entanto, recomendamos aos autores de extensões que utilizem <code>SyntheticBeanBuildItem</code>, que é mais idiomático para o Quarkus.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="synthetic_observers"><a class="anchor" href="#synthetic_observers"></a>7. Caso de Uso - Observadores Sintéticos</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Similar to <a href="#synthetic_beans">synthetic beans</a>, the attributes of a synthetic observer method are not derived from a Java method. Instead, all the attributes are defined by an extension.</p>
</div>
<div class="paragraph">
<p><em>Solução</em>: Se for necessário registrar um observador sintético, utilize o <code>ObserverRegistrationPhaseBuildItem</code>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Uma etapa de construção que consome o <code>ObserverRegistrationPhaseBuildItem</code> deve sempre produzir um <code>ObserverConfiguratorBuildItem</code> ou, pelo menos, injetar um <code>BuildProducer</code> para este item de construção, caso contrário, pode ser ignorado ou processado no momento errado (por exemplo, após a fase de bootstrap correta do CDI).
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Exemplo de <code>ObserverRegistrationPhaseBuildItem</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@BuildStep
void syntheticObserver(ObserverRegistrationPhaseBuildItem observerRegistrationPhase,
            BuildProducer&lt;MyBuildItem&gt; myBuildItem,
            BuildProducer&lt;ObserverConfiguratorBuildItem&gt; observerConfigurationRegistry) {
   observerConfigurationRegistry.produce(new ObserverConfiguratorBuildItem(observerRegistrationPhase.getContext()
       .configure()
       .beanClass(DotName.createSimple(MyBuildStep.class.getName()))
       .observedType(String.class)
       .notify(mc -&gt; {
           // do some gizmo bytecode generation...
       })));
   myBuildItem.produce(new MyBuildItem());
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>A saída de um <code>ObserverConfigurator</code> é gravada como bytecode. Portanto, há algumas limitações na forma como um observador sintético é chamado no tempo de execução. Atualmente, você deve gerar o bytecode do corpo do método diretamente.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="generated_beans"><a class="anchor" href="#generated_beans"></a>8. Caso de Uso - Tenho uma Classe de Bean Gerada</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Sem problemas. Você pode gerar o bytecode de uma classe de bean manualmente e, então, tudo o que precisa fazer é produzir um <code>GeneratedBeanBuildItem</code> em vez de <code>GeneratedClassBuildItem</code> .</p>
</div>
<div class="listingblock">
<div class="title">Exemplo de <code>GeneratedBeanBuildItem</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@BuildStep
void generatedBean(BuildProducer&lt;GeneratedBeanBuildItem&gt; generatedBeans) {
    ClassOutput beansClassOutput = new GeneratedBeanGizmoAdaptor(generatedBeans); <i class="conum" data-value="1"></i><b>(1)</b>
    ClassCreator beanClassCreator = ClassCreator.builder().classOutput(beansClassOutput)
                .className("org.acme.MyBean")
                .build();
    beanClassCreator.addAnnotation(Singleton.class);
    beanClassCreator.close(); <i class="conum" data-value="2"></i><b>(2)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>io.quarkus.arc.deployment.GeneratedBeanGizmoAdaptor</code> facilita a produção de <code>GeneratedBeanBuildItem</code>s a partir de constructos Gizmo.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>A classe de bean resultante é algo como <code>public class @Singleton MyBean { }</code>.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="use-case-i-need-to-validate-the-deployment"><a class="anchor" href="#use-case-i-need-to-validate-the-deployment"></a>9. Caso de Uso - Preciso Validar a Implantação</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Por vezes, as extensões precisam de inspecionar os beans, os observadores e os pontos de injeção e, em seguida, efetuar validações adicionais e falhar a construção se algo estiver errado.</p>
</div>
<div class="paragraph">
<p><em>Solução</em>: Se uma extensão precisa validar a implantação, deve utilizar o <code>ValidationPhaseBuildItem</code>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Uma etapa de construção que consome o <code>ValidationPhaseBuildItem</code> deve sempre produzir um <code>ValidationErrorBuildItem</code> ou, pelo menos, injetar um <code>BuildProducer</code> para este item de construção, caso contrário, pode ser ignorado ou processado no momento errado (por exemplo, após a fase de bootstrap correta do CDI).
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@BuildStep
void validate(ValidationPhaseBuildItem validationPhase,
            BuildProducer&lt;MyBuildItem&gt; myBuildItem,
            BuildProducer&lt;ValidationErrorBuildItem&gt; errors) {
   if (someCondition) {
     errors.produce(new ValidationErrorBuildItem(new IllegalStateException()));
     myBuildItem.produce(new MyBuildItem());
   }
}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Você pode filtrar facilmente todos os beans registrados através do prático <code>BeanStream</code> retornado pelo método <code>ValidationPhaseBuildItem.getContext().beans()</code>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="custom_context"><a class="anchor" href="#custom_context"></a>10. Caso de Uso - Registrar um Contexto CDI Personalizado</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Às vezes, as extensões precisam estender o conjunto de contextos CDI integrados.</p>
</div>
<div class="paragraph">
<p><em>Solução</em>: Se for necessário registrar um contexto personalizado, utilize o <code>ContextRegistrationPhaseBuildItem</code>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Uma etapa de construção que consome o <code>ContextRegistrationPhaseBuildItem</code> deve sempre produzir um <code>ContextConfiguratorBuildItem</code> ou, pelo menos, injetar um <code>BuildProducer</code> para este item de construção, caso contrário, pode ser ignorado ou processado no momento errado (por exemplo, após a fase de bootstrap correta do CDI).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Exemplo de <code>ContextRegistrationPhaseBuildItem</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@BuildStep
ContextConfiguratorBuildItem registerContext(ContextRegistrationPhaseBuildItem phase) {
      return new ContextConfiguratorBuildItem(phase.getContext().configure(TransactionScoped.class).normal().contextClass(TransactionContext.class));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Além disso, cada extensão que registra um contexto CDI personalizado através do <code>ContextRegistrationPhaseBuildItem</code> deve também produzir o <code>CustomScopeBuildItem</code> de modo a contribuir com o nome da anotação de escopo personalizado para o conjunto de anotações que definem o bean.</p>
</div>
<div class="paragraph">
<p>Exemplo de <code>CustomScopeBuildItem</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@BuildStep
CustomScopeBuildItem customScope() {
   return new CustomScopeBuildItem(DotName.createSimple(TransactionScoped.class.getName()));
}</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="what-if-i-need-to-know-all-the-scopes-used-in-the-application"><a class="anchor" href="#what-if-i-need-to-know-all-the-scopes-used-in-the-application"></a>10.1. E Se Eu Precisar Conhecer Todos os Escopos Utilizados na Aplicação?</h3>
<div class="paragraph">
<p><em>Solução</em>: Você pode injetar o <code>CustomScopeAnnotationsBuildItem</code> numa etapa de construção e utilizar os métodos convenientes, como <code>CustomScopeAnnotationsBuildItem.isScopeDeclaredOn()</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="additional_interceptor_bindings"><a class="anchor" href="#additional_interceptor_bindings"></a>11. Caso de Uso - Ligações de Interceptadores Adicionais</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In rare cases it might be handy to programmatically register an existing annotation that is not annotated with <code>@javax.interceptor.InterceptorBinding</code> as an interceptor binding.
This is similar to what CDI achieves through <code>BeforeBeanDiscovery#addInterceptorBinding()</code>.
We are going to use <code>InterceptorBindingRegistrarBuildItem</code> to get it done.</p>
</div>
<div class="listingblock">
<div class="title">Exemplo de <code>InterceptorBindingRegistrarBuildItem</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@BuildStep
InterceptorBindingRegistrarBuildItem addInterceptorBindings() {
    return new InterceptorBindingRegistrarBuildItem(new InterceptorBindingRegistrar() {
        @Override
        public List&lt;InterceptorBinding&gt; getAdditionalBindings() {
            return List.of(InterceptorBinding.of(NotAnInterceptorBinding.class));
        }
    });
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="use-case-additional-qualifiers"><a class="anchor" href="#use-case-additional-qualifiers"></a>12. Caso de Uso - Qualificadores Adicionais</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Sometimes it might be useful to register an existing annotation that is not annotated with <code>@javax.inject.Qualifier</code> as a CDI qualifier.
This is similar to what CDI achieves through <code>BeforeBeanDiscovery#addQualifier()</code>.
We are going to use <code>QualifierRegistrarBuildItem</code> to get it done.</p>
</div>
<div class="listingblock">
<div class="title">Exemplo de <code>QualifierRegistrarBuildItem</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@BuildStep
QualifierRegistrarBuildItem addQualifiers() {
    return new QualifierRegistrarBuildItem(new QualifierRegistrar() {
        @Override
        public Map&lt;DotName, Set&lt;String&gt;&gt; getAdditionalQualifiers() {
            return Collections.singletonMap(DotName.createSimple(NotAQualifier.class.getName()),
                                        Collections.emptySet());
        }
    });
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="use-case-additional-stereotypes"><a class="anchor" href="#use-case-additional-stereotypes"></a>13. Caso de Uso - Estereótipos Adicionais</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It is sometimes useful to register an existing annotation that is not annotated with <code>@javax.enterprise.inject.Stereotype</code> as a CDI stereotype.
This is similar to what CDI achieves through <code>BeforeBeanDiscovery#addStereotype()</code>.
We are going to use <code>StereotypeRegistrarBuildItem</code> to get it done.</p>
</div>
<div class="listingblock">
<div class="title">Exemplo de <code>StereotypeRegistrarBuildItem</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@BuildStep
StereotypeRegistrarBuildItem addStereotypes() {
    return new StereotypeRegistrarBuildItem(new StereotypeRegistrar() {
        @Override
        public Set&lt;DotName&gt; getAdditionalStereotypes() {
            return Collections.singleton(DotName.createSimple(NotAStereotype.class.getName()));
        }
    });
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the newly registered stereotype annotation doesn&#8217;t have the appropriate meta-annotations, such as scope or interceptor bindings, use an <a href="#annotations_transformer_build_item">annotation transformation</a> to add them.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="injection_point_transformation"><a class="anchor" href="#injection_point_transformation"></a>14. Caso de Uso - Transformação de Pontos de Injeção</h2>
<div class="sectionbody">
<div class="paragraph">
<p>De vez em quando, é útil poder alterar os qualificadores de um ponto de injeção de forma programática. Você pode fazer exatamente isso com <code>InjectionPointTransformerBuildItem</code> . O exemplo a seguir mostra como aplicar a transformação a pontos de injeção com o tipo <code>Foo</code> que contém o qualificador <code>MyQualifier</code> :</p>
</div>
<div class="listingblock">
<div class="title">Exemplo de <code>InjectionPointTransformerBuildItem</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@BuildStep
InjectionPointTransformerBuildItem transformer() {
    return new InjectionPointTransformerBuildItem(new InjectionPointsTransformer() {

        public boolean appliesTo(Type requiredType) {
            return requiredType.name().equals(DotName.createSimple(Foo.class.getName()));
        }

        public void transform(TransformationContext context) {
            if (context.getQualifiers().stream()
                    .anyMatch(a -&gt; a.name().equals(DotName.createSimple(MyQualifier.class.getName())))) {
                context.transform()
                        .removeAll()
                        .add(DotName.createSimple(MyOtherQualifier.class.getName()))
                        .done();
            }
        }
    });
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In theory, you can use <a href="#annotations_transformer_build_item">an <code>AnnotationsTransformer</code></a> to achieve the same goal. However, there are few differences that make <code>InjectionPointsTransformer</code> more suitable for this particular task: (1) annotation transformers are applied to all classes during bean discovery, whereas <code>InjectionPointsTransformer</code> is only applied to discovered injection points after bean discovery; (2) with <code>InjectionPointsTransformer</code> you don&#8217;t need to handle various types of injection points (field, parameters of initializer methods, etc.).
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="use-case-resource-annotations-and-injection"><a class="anchor" href="#use-case-resource-annotations-and-injection"></a>15. Caso de Uso - Anotações e Injeção de Recursos</h2>
<div class="sectionbody">
<div class="paragraph">
<p>O <code>ResourceAnnotationBuildItem</code> pode ser usado para especificar anotações de recursos que possibilitam a resolução de pontos de injeção não CDI, como os recursos do Jakarta EE. Um integrador também deve fornecer uma implementação correspondente do provedor de serviços <code>io.quarkus.arc.ResourceReferenceProvider</code>.</p>
</div>
<div class="listingblock">
<div class="title">Exemplo de <code>ResourceAnnotationBuildItem</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@BuildStep
void setupResourceInjection(BuildProducer&lt;ResourceAnnotationBuildItem&gt; resourceAnnotations, BuildProducer&lt;GeneratedResourceBuildItem&gt; resources) {
    resources.produce(new GeneratedResourceBuildItem("META-INF/services/io.quarkus.arc.ResourceReferenceProvider",
        MyResourceReferenceProvider.class.getName().getBytes()));
    resourceAnnotations.produce(new ResourceAnnotationBuildItem(DotName.createSimple(MyAnnotation.class.getName())));
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="build_metadata"><a class="anchor" href="#build_metadata"></a>16. Metadados de Tempo de Construção Disponíveis</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Qualquer uma das extensões acima que opere com <code>BuildExtension.BuildContext</code> pode aproveitar determinados metadados de tempo de construção gerados durante a construção. As chaves integradas, localizadas em <code>io.quarkus.arc.processor.BuildExtension.Key</code> são:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ANNOTATION_STORE</dt>
<dd>
<p>Contém um <code>AnnotationStore</code> que mantém informações sobre todas as anotações <code>AnnotationTarget</code> após a aplicação de transformadores de anotações</p>
</dd>
<dt class="hdlist1">INJECTION_POINTS</dt>
<dd>
<p><code>Collection&lt;InjectionPointInfo&gt;</code> contendo todos os pontos de injeção</p>
</dd>
<dt class="hdlist1">BEANS</dt>
<dd>
<p><code>Collection&lt;BeanInfo&gt;</code> contendo todos os beans</p>
</dd>
<dt class="hdlist1">REMOVED_BEANS</dt>
<dd>
<p><code>Collection&lt;BeanInfo&gt;</code> containing all the removed beans; see <a href="cdi-reference#remove_unused_beans">Removing unused beans</a> for more information</p>
</dd>
<dt class="hdlist1">OBSERVERS</dt>
<dd>
<p><code>Collection&lt;ObserverInfo&gt;</code> contendo todos os observadores</p>
</dd>
<dt class="hdlist1">SCOPES</dt>
<dd>
<p><code>Collection&lt;ScopeInfo&gt;</code> contendo todos os escopos, incluindo os personalizados</p>
</dd>
<dt class="hdlist1">QUALIFIERS</dt>
<dd>
<p><code>Map&lt;DotName, ClassInfo&gt;</code> contendo todos os qualificadores</p>
</dd>
<dt class="hdlist1">INTERCEPTOR_BINDINGS</dt>
<dd>
<p><code>Map&lt;DotName, ClassInfo&gt;</code> contendo todas os vínculos de interceptadores</p>
</dd>
<dt class="hdlist1">STEREOTYPES</dt>
<dd>
<p><code>Map&lt;DotName, StereotypeInfo&gt;</code> contendo todos os estereótipos</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Para obtê-los, basta consultar o objeto de contexto da extensão para uma determinada chave. Observe que esses metadados são disponibilizados à medida que a construção avança, o que significa que as extensões só podem aproveitar os metadados que foram criados antes das extensões serem invocadas. Se sua extensão tentar recuperar metadados que ainda não foram produzidos, será retornado <code>null</code> . Aqui está um resumo de quais extensões podem acessar quais metadados:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">AnnotationsTransformer</dt>
<dd>
<p>Não deve depender de quaisquer metadados, uma vez que pode ser utilizado em qualquer momento de qualquer fase do bootstrap</p>
</dd>
<dt class="hdlist1">ContextRegistrar</dt>
<dd>
<p>Tem acesso a <code>ANNOTATION_STORE</code>, <code>QUALIFIERS</code>, <code>INTERCEPTOR_BINDINGS</code>, <code>STEREOTYPES</code></p>
</dd>
<dt class="hdlist1">InjectionPointsTransformer</dt>
<dd>
<p>Tem acesso a <code>ANNOTATION_STORE</code>, <code>QUALIFIERS</code>, <code>INTERCEPTOR_BINDINGS</code>, <code>STEREOTYPES</code></p>
</dd>
<dt class="hdlist1">ObserverTransformer</dt>
<dd>
<p>Tem acesso a <code>ANNOTATION_STORE</code>, <code>QUALIFIERS</code>, <code>INTERCEPTOR_BINDINGS</code>, <code>STEREOTYPES</code></p>
</dd>
<dt class="hdlist1">BeanRegistrar</dt>
<dd>
<p>Tem acesso a <code>ANNOTATION_STORE</code>, <code>QUALIFIERS</code>, <code>INTERCEPTOR_BINDINGS</code>, <code>STEREOTYPES</code>, <code>BEANS</code> (apenas beans baseados em classes), <code>OBSERVERS</code> (apenas observadores baseados em classes), <code>INJECTION_POINTS</code></p>
</dd>
<dt class="hdlist1">ObserverRegistrar</dt>
<dd>
<p>Tem acesso a <code>ANNOTATION_STORE</code>, <code>QUALIFIERS</code>, <code>INTERCEPTOR_BINDINGS</code>, <code>STEREOTYPES</code>, <code>BEANS</code>, <code>OBSERVERS</code> (apenas observadores baseados em classes), <code>INJECTION_POINTS</code></p>
</dd>
<dt class="hdlist1">BeanDeploymentValidator</dt>
<dd>
<p>Tem acesso a todos os metadados de construção</p>
</dd>
</dl>
</div>
</div>
</div>
        </div>
        <div class="grid__item width-4-12 width-12-12-m tocwrapper">
            <div class="hide-mobile toc"><ul class="sectlevel1">
<li><a href="#metadata-sources">1. Fontes de metadados</a></li>
<li><a href="#use-case-my-class-is-not-recognized-as-a-bean">2. Caso de uso - Minha classe não é reconhecida como um Bean</a>
<ul class="sectlevel2">
<li><a href="#additional_bean_build_item">2.1. <em>Razão 1</em>: Classe Não Está Descoberta</a></li>
<li><a href="#reason-2-class-is-discovered-but-has-no-bean-defining-annotation">2.2. <em>Motivo 2</em>: A Classe É Descoberta mas Não Tem uma Anotação de Definição de Bean</a></li>
<li><a href="#unremovable_builditem">2.3. <em>Motivo 3</em>: A Classe Foi Descoberta e Tem uma Anotação que Define o Bean, mas Foi Removida</a></li>
</ul>
</li>
<li><a href="#use-case-my-annotation-is-not-recognized-as-a-qualifier-or-an-interceptor-binding">3. Caso de uso - Minha Anotação não É Reconhecida Como Um Qualificador ou Uma Ligação de Interceptador</a></li>
<li><a href="#annotations_transformer_build_item">4. Use Case - I Need To Transform Metadata</a></li>
<li><a href="#inspect_beans">5. Caso de Uso - Inspecionar Beans, Observadores e Pontos de Injeção</a>
<ul class="sectlevel2">
<li><a href="#solution-1-beandiscoveryfinishedbuilditem">5.1. <em>Solução 1</em>: <code>BeanDiscoveryFinishedBuildItem</code></a></li>
<li><a href="#solution-2-synthesisfinishedbuilditem">5.2. <em>Solução 2</em>: <code>SynthesisFinishedBuildItem</code></a></li>
</ul>
</li>
<li><a href="#synthetic_beans">6. Caso de Uso - A Necessidade de Beans Sintéticos</a></li>
<li><a href="#synthetic_observers">7. Caso de Uso - Observadores Sintéticos</a></li>
<li><a href="#generated_beans">8. Caso de Uso - Tenho uma Classe de Bean Gerada</a></li>
<li><a href="#use-case-i-need-to-validate-the-deployment">9. Caso de Uso - Preciso Validar a Implantação</a></li>
<li><a href="#custom_context">10. Caso de Uso - Registrar um Contexto CDI Personalizado</a>
<ul class="sectlevel2">
<li><a href="#what-if-i-need-to-know-all-the-scopes-used-in-the-application">10.1. E Se Eu Precisar Conhecer Todos os Escopos Utilizados na Aplicação?</a></li>
</ul>
</li>
<li><a href="#additional_interceptor_bindings">11. Caso de Uso - Ligações de Interceptadores Adicionais</a></li>
<li><a href="#use-case-additional-qualifiers">12. Caso de Uso - Qualificadores Adicionais</a></li>
<li><a href="#use-case-additional-stereotypes">13. Caso de Uso - Estereótipos Adicionais</a></li>
<li><a href="#injection_point_transformation">14. Caso de Uso - Transformação de Pontos de Injeção</a></li>
<li><a href="#use-case-resource-annotations-and-injection">15. Caso de Uso - Anotações e Injeção de Recursos</a></li>
<li><a href="#build_metadata">16. Metadados de Tempo de Construção Disponíveis</a></li>
</ul></div>
        </div>
    </div>
    </div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_reverse.svg" class="project-logo" title="Quarkus"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Quarkus is open. All dependencies of this project are available under the <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a> or compatible license. <i class='fab fa-creative-commons'></i><i class='fab fa-creative-commons-by'></i> <a href='https://creativecommons.org/licenses/by/3.0/' target='_blank'>CC by 3.0</a><br /><br />This website was built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a>, is hosted on <a href='https://pages.github.com/' target='_blank'>GitHub Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/quarkusio/quarkusio.github.io' target='_blank'>fork the website</a> and show us what you’ve got.</p>

    
      <div class="width-1-12 project-links">
        <span>Navigation</span>
        <ul class="footer-links">
          
          
            <li><a href="/" target="_blank">Home</a></li>
          
          
          
            <li><a href="/about" target="_blank">About</a></li>
          
          
          
            <li><a href="/blog" target="_blank">Blog</a></li>
          
          
          
            <li><a href="/insights" target="_blank">Podcast</a></li>
          
          
          
            <li><a href="/events" target="_blank">Eventos</a></li>
          
          
          
            <li><a href="/newsletter" target="_blank">Newsletter</a></li>
          
          
          
            <li><a href="/userstories" target="_blank">User Stories</a></li>
          
          
          
            <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" target="_blank">Roadmap</a></li>
          
          
          
            <li><a href="/security" target="_blank">Security&nbsp;policy</a></li>
          
          
          
            <li><a href="/usage" target="_blank">Usage</a></li>
          
          
          
            <li><a href="/brand" target="_blank">Brand</a></li>
          
          
          
            <li><a href="/desktopwallpapers" target="_blank">Wallpapers</a></li>
          
          
          
            <li><a href="https://www.redhat.com/en/about/privacy-policy" target="_blank">Privacy Policy</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Follow Us</span>
        <ul class="footer-links">
          
          
            <li><a href="https://x.com/quarkusio" target="_blank">X</a></li>
          
          
          
            <li><a href="https://bsky.app/profile/quarkus.io" target="_blank">Bluesky</a></li>
          
          
          
            <li><a rel="me" href="https://fosstodon.org/@quarkusio" target="_blank">Mastodon</a></li>
            
          
          
            <li><a href="https://www.threads.com/@quarkusio" target="_blank">Threads</a></li>
          
          
          
            <li><a href="https://www.facebook.com/quarkusio" target="_blank">Facebook</a></li>
          
          
          
            <li><a href="https://www.linkedin.com/company/quarkusio/" target="_blank">Linkedin</a></li>
          
          
          
            <li><a href="https://www.youtube.com/channel/UCaW8QG_QoIk_FnjLgr5eOqg" target="_blank">Youtube</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio" target="_blank">GitHub</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-2-12 project-links">
        <span>Get Help</span>
        <ul class="footer-links">
          
          
            <li><a href="/support" target="_blank">Support</a></li>
          
          
          
            <li><a href="/guides" target="_blank">Guias</a></li>
          
          
          
            <li><a href="/faq" target="_blank">FAQ</a></li>
          
          
          
            <li><a href="/get-started" target="_blank">Get Started</a></li>
          
          
          
            <li><a href="https://stackoverflow.com/questions/tagged/quarkus" target="_blank">Stack Overflow</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio/quarkus/discussions" target="_blank">Discussions</a></li>
          
          
          
            <li><a href="https://groups.google.com/forum/#!forum/quarkus-dev" target="_blank">Development mailing list</a></li>
          
          
          
            <li><a href="https://stats.uptimerobot.com/ze1PfweT2p" target="_blank">Quarkus Service Status</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Languages</span>
        <ul class="footer-links">
          
          
            <li><a href="https://quarkus.io/" target="_blank">English</a></li>
          
          
          
            <li><a href="https://pt.quarkus.io/" target="_blank">Português&nbsp;(Brasileiro)</a></li>
          
          
          
            <li><a href="https://es.quarkus.io/" target="_blank">Español</a></li>
          
          
          
            <li><a href="https://cn.quarkus.io/" target="_blank">简体中文</a></li>
          
          
          
            <li><a href="https://ja.quarkus.io/" target="_blank">日本語</a></li>
          
          
        </ul>
      </div>
    

    
      <div class="width-4-12 more-links">
        <span>Quarkus is made of community projects</span>
        <ul class="footer-links">
          
            <li><a blah href="https://vertx.io/" target="_blank">Eclipse Vert.x</a></li>
          
            <li><a blah href="https://smallrye.io" target="_blank">SmallRye</a></li>
          
            <li><a blah href="https://hibernate.org" target="_blank">Hibernate</a></li>
          
            <li><a blah href="https://netty.io" target="_blank">Netty</a></li>
          
            <li><a blah href="https://resteasy.github.io" target="_blank">RESTEasy</a></li>
          
            <li><a blah href="https://camel.apache.org" target="_blank">Apache Camel</a></li>
          
            <li><a blah href="https://microprofile.io" target="_blank">Eclipse MicroProfile</a></li>
          
            <li><a blah href="https://code.quarkus.io/" target="_blank">And many more...</a></li>
          
        </ul>
      </div>
    
  </div>
</div>

  <div class="content cf-footer">
  <div class="flexcontainer">
    <div class="cf-logo">
      <a class="cf-logo" href="https://www.commonhaus.org/" target="_blank"><img src="https://raw.githubusercontent.com/commonhaus/artwork/main/foundation/brand/svg/CF_logo_horizontal_single_reverse.svg"/></a>
    </div>
    <div class="license">
      Copyright © Quarkus. All rights reserved. For details on our trademarks, please visit our <a href="https://www.commonhaus.org/policies/trademark-policy/">Trademark Policy</a> and <a href="https://www.commonhaus.org/trademarks/">Trademark List</a>. Trademarks of third parties are owned by their respective holders and their mention here does not suggest any endorsement or association.
    </div>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/scroll-down.js"></script>
  <script src="/assets/javascript/satellite.js" type="text/javascript"></script>
  <script src="/guides/javascript/config.js" type="text/javascript"></script>
  <script src="/assets/javascript/guides-version-dropdown.js" type="text/javascript"></script>
  <script src="/assets/javascript/back-to-top.js" type="text/javascript"></script>
  <script src="/assets/javascript/clipboard.min.js" type="text/javascript"></script>
  <script src="/assets/javascript/copy.js" type="text/javascript"></script>
  <script src="/assets/javascript/asciidoc-tabs.js" type="text/javascript"></script>
  <script src="/assets/javascript/future-date.js" type="text/javascript"></script>
  <script src="/assets/javascript/randomize.js" type="text/javascript"></script>
  <script src="/assets/javascript/time.js" type="text/javascript"></script>
</body>

</html>
